{"remainingRequest":"/Users/momo/vue/live-data-analysis-static/node_modules/babel-loader/lib/index.js!/Users/momo/vue/live-data-analysis-static/src/store/modules/user.js","dependencies":[{"path":"/Users/momo/vue/live-data-analysis-static/src/store/modules/user.js","mtime":1626864386275},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":1626939577620},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/babel-loader/lib/index.js","mtime":1640003217818}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgc3RvcmFnZSBmcm9tICdzdG9yZSc7CmltcG9ydCB7IGxvZ2luLCBnZXRJbmZvLCBsb2dvdXQgfSBmcm9tICdAL2FwaS9sb2dpbic7CmltcG9ydCB7IEFDQ0VTU19UT0tFTiB9IGZyb20gJ0Avc3RvcmUvbXV0YXRpb24tdHlwZXMnOwppbXBvcnQgeyB3ZWxjb21lIH0gZnJvbSAnQC91dGlscy91dGlsJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCBzdG9yZSBmcm9tICIuLi9pbmRleCI7CnZhciB1c2VyID0gewogIHN0YXRlOiB7CiAgICAvL3Rva2VuOiAnJywKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogJycsCiAgICB3ZWxjb21lOiAnJywKICAgIGF2YXRhcjogJ2h0dHBzOi8vd3BpbWcud2FsbHN0Y24uY29tL2Y3Nzg3MzhjLWU0ZjgtNDg3MC1iNjM0LTU2NzAzYjRhY2FmZS5naWYnLAogICAgcm9sZXM6IFtdLAogICAgZW1haWw6ICcnLAogICAgbW9tb2lkOiAnJywKICAgIGluZm86IHt9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgfSwKICAgIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgICBzdGF0ZS5uYW1lID0gbmFtZTsgLy9zdGF0ZS53ZWxjb21lID0gd2VsY29tZQogICAgfSwKICAgIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgICB9LAogICAgU0VUX1JPTEVTOiBmdW5jdGlvbiBTRVRfUk9MRVMoc3RhdGUsIHJvbGVzKSB7CiAgICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgICB9LAogICAgU0VUX0VNQUlMOiBmdW5jdGlvbiBTRVRfRU1BSUwoc3RhdGUsIGVtYWlsKSB7CiAgICAgIHN0YXRlLmVtYWlsID0gZW1haWw7CiAgICB9LAogICAgU0VUX01PTU9JRDogZnVuY3Rpb24gU0VUX01PTU9JRChzdGF0ZSwgbW9tb2lkKSB7CiAgICAgIHN0YXRlLm1vbW9pZCA9IG1vbW9pZDsKICAgIH0sCiAgICBTRVRfUEhPTkU6IGZ1bmN0aW9uIFNFVF9QSE9ORShzdGF0ZSwgcGhvbmUpIHsKICAgICAgc3RhdGUucGhvbmUgPSBwaG9uZTsKICAgIH0sCiAgICBTRVRfSU5GTzogZnVuY3Rpb24gU0VUX0lORk8oc3RhdGUsIGluZm8pIHsKICAgICAgc3RhdGUuaW5mbyA9IGluZm87CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvLyDnmbvlvZUKICAgIExvZ2luOiBmdW5jdGlvbiBMb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHNldFRva2VuKHVzZXJJbmZvKTsKICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCB1c2VySW5mbyk7CiAgICB9LAogICAgLy8g6I635Y+W55So5oi35L+h5oGvCiAgICBHZXRJbmZvOiBmdW5jdGlvbiBHZXRJbmZvKF9yZWYyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGdldEluZm8oc3RhdGUudG9rZW4sIHN0b3JlLmdldHRlcnMuYWVnaXNLZXksIHN0b3JlLmdldHRlcnMuYWVnaXNTZWNyZXQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlOwoKICAgICAgICAgIGlmIChkYXRhLnBlcm1pc3Npb25zICYmIGRhdGEucGVybWlzc2lvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAvLyDpqozor4Hov5Tlm57nmoRyb2xlc+aYr+WQpuaYr+S4gOS4qumdnuepuuaVsOe7hAogICAgICAgICAgICBjb21taXQoJ1NFVF9ST0xFUycsIGRhdGEucGVybWlzc2lvbnMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KCfpqozor4Hkv6Hmga/lpLHmlYjvvIzor7fph43mlrDorqTor4EnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb21taXQoJ1NFVF9OQU1FJywgZGF0YS51c2VyLm5hbWUpOwogICAgICAgICAgY29uc29sZS5sb2coIueUqOaIt+WQjeWtlyIsIGRhdGEudXNlci5uYW1lKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX1BIT05FJywgZGF0YS51c2VyLnBob25lKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX01PTU9JRCcsIGRhdGEudXNlci5tb21vaWQpOwogICAgICAgICAgY29tbWl0KCdTRVRfRU1BSUwnLCBkYXRhLnVzZXIuZW1haWwpOwogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoJ+iwg+eUqGdldGluZm/miqXplJknKTsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOeZu+WHugogICAgTG9nT3V0OiBmdW5jdGlvbiBMb2dPdXQoX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9OQU1FJywgJycpOwogICAgICAgICAgY29tbWl0KCdTRVRfUEhPTkUnLCAnJyk7CiAgICAgICAgICBjb21taXQoJ1NFVF9NT01PSUQnLCAnJyk7CiAgICAgICAgICBjb21taXQoJ1NFVF9FTUFJTCcsICcnKTsKICAgICAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliY3nq68g55m75Ye6CiAgICBGZWRMb2dPdXQ6IGZ1bmN0aW9uIEZlZExvZ091dChfcmVmNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgICByZW1vdmVUb2tlbigpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB1c2VyOw=="},{"version":3,"sources":["/Users/momo/vue/live-data-analysis-static/src/store/modules/user.js"],"names":["storage","login","getInfo","logout","ACCESS_TOKEN","welcome","getToken","setToken","removeToken","store","user","state","token","name","avatar","roles","email","momoid","info","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_EMAIL","SET_MOMOID","SET_PHONE","phone","SET_INFO","actions","Login","userInfo","commit","GetInfo","Promise","resolve","reject","getters","aegisKey","aegisSecret","then","response","data","permissions","length","console","log","catch","error","LogOut","FedLogOut"],"mappings":"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","sourcesContent":["import storage from 'store'\nimport { login, getInfo, logout } from '@/api/login'\nimport { ACCESS_TOKEN } from '@/store/mutation-types'\nimport { welcome } from '@/utils/util'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport store from \"../index\";\n\nconst user = {\n  state: {\n    //token: '',\n    token: getToken(),\n    name: '',\n    welcome: '',\n    avatar: 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif',\n    roles: [],\n    email:'',\n    momoid:'',\n    info: {},\n  },\n\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      state.token = token\n    },\n    SET_NAME: (state, name) => {\n      state.name = name\n       //state.welcome = welcome\n    },\n    SET_AVATAR: (state, avatar) => {\n      state.avatar = avatar\n    },\n    SET_ROLES: (state, roles) => {\n      state.roles = roles\n    },\n    SET_EMAIL: (state, email) => {\n      state.email = email\n    },\n    SET_MOMOID: (state, momoid) => {\n      state.momoid = momoid\n    },\n    SET_PHONE: (state, phone) => {\n      state.phone = phone\n    },\n    SET_INFO: (state, info) => {\n      state.info = info\n    } \n  },\n\n  actions: {\n   \n     // 登录\n     Login({ commit }, userInfo) {\n      setToken(userInfo)\n      commit('SET_TOKEN', userInfo)\n    }, \n   \n\n    // 获取用户信息\n    GetInfo({ commit,state }) {\n      return new Promise((resolve, reject) => {\n        getInfo(state.token,store.getters.aegisKey,store.getters.aegisSecret).then(response => {\n          const data = response\n          if (data.permissions && data.permissions.length > 0) { // 验证返回的roles是否是一个非空数组\n            commit('SET_ROLES', data.permissions)\n          } else {\n            reject('验证信息失效，请重新认证')\n          }\n          commit('SET_NAME', data.user.name)\n          console.log(\"用户名字\",data.user.name)\n          commit('SET_PHONE', data.user.phone)\n          commit('SET_MOMOID', data.user.momoid)\n          commit('SET_EMAIL', data.user.email)\n          resolve(response)\n        }).catch(error => {\n          reject('调用getinfo报错')\n          reject(error)\n        })\n      })\n    },\n\n    // 登出\n    LogOut({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        logout(state.token).then(() => {\n          commit('SET_TOKEN', '')\n          commit('SET_ROLES', [])\n          commit('SET_NAME', '')\n          commit('SET_PHONE', '')\n          commit('SET_MOMOID', '')\n          commit('SET_EMAIL', '')\n          removeToken()\n          resolve()\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // 前端 登出\n    FedLogOut({ commit }) {\n      return new Promise(resolve => {\n        commit('SET_TOKEN', '')\n        removeToken()\n        resolve()\n      })\n    } \n\n  }\n}\n\nexport default user\n"]}]}