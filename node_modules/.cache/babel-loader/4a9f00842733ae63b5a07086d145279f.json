{"remainingRequest":"/Users/momo/vue/live-data-analysis-static/node_modules/babel-loader/lib/index.js!/Users/momo/vue/live-data-analysis-static/src/core/directives/action.js","dependencies":[{"path":"/Users/momo/vue/live-data-analysis-static/src/core/directives/action.js","mtime":1626864386264},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7Ci8qKgogKiBBY3Rpb24g5p2D6ZmQ5oyH5LukCiAqIOaMh+S7pOeUqOazle+8mgogKiAgLSDlnKjpnIDopoHmjqfliLYgYWN0aW9uIOe6p+WIq+adg+mZkOeahOe7hOS7tuS4iuS9v+eUqCB2LWFjdGlvbjpbbWV0aG9kXSAsIOWmguS4i++8mgogKiAgICA8aS1idXR0b24gdi1hY3Rpb246YWRkID7mt7vliqDnlKjmiLc8L2EtYnV0dG9uPgogKiAgICA8YS1idXR0b24gdi1hY3Rpb246ZGVsZXRlPuWIoOmZpOeUqOaItzwvYS1idXR0b24+CiAqICAgIDxhIHYtYWN0aW9uOmVkaXQgQGNsaWNrPSJlZGl0KHJlY29yZCkiPuS/ruaUuTwvYT4KICoKICogIC0g5b2T5YmN55So5oi35rKh5pyJ5p2D6ZmQ5pe277yM57uE5Lu25LiK5L2/55So5LqG6K+l5oyH5Luk5YiZ5Lya6KKr6ZqQ6JePCiAqICAtIOW9k+WQjuWPsOadg+mZkOi3nyBwcm8g5o+Q5L6b55qE5qih5byP5LiN5ZCM5pe277yM5Y+q6ZyA6KaB6ZKI5a+56L+Z6YeM55qE5p2D6ZmQ6L+H5ruk6L+b6KGM5L+u5pS55Y2z5Y+vCiAqCiAqICBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVDb21wb25lbnQvYW50LWRlc2lnbi12dWUtcHJvL3B1bGwvNTMKICovCgp2YXIgYWN0aW9uID0gVnVlLmRpcmVjdGl2ZSgnYWN0aW9uJywgewogIGluc2VydGVkOiBmdW5jdGlvbiBpbnNlcnRlZChlbCwgYmluZGluZywgdm5vZGUpIHsKICAgIHZhciBhY3Rpb25OYW1lID0gYmluZGluZy5hcmc7CiAgICB2YXIgcm9sZXMgPSBzdG9yZS5nZXR0ZXJzLnJvbGVzOwogICAgdmFyIGVsVmFsID0gdm5vZGUuY29udGV4dC4kcm91dGUubWV0YS5wZXJtaXNzaW9uOwogICAgdmFyIHBlcm1pc3Npb25JZCA9IGVsVmFsIGluc3RhbmNlb2YgU3RyaW5nICYmIFtlbFZhbF0gfHwgZWxWYWw7CiAgICByb2xlcy5wZXJtaXNzaW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7CiAgICAgIGlmICghcGVybWlzc2lvbklkLmluY2x1ZGVzKHAucGVybWlzc2lvbklkKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHAuYWN0aW9uTGlzdCAmJiAhcC5hY3Rpb25MaXN0LmluY2x1ZGVzKGFjdGlvbk5hbWUpKSB7CiAgICAgICAgZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKSB8fCAoZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7CiAgICAgIH0KICAgIH0pOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IGFjdGlvbjs="},{"version":3,"sources":["/Users/momo/vue/live-data-analysis-static/src/core/directives/action.js"],"names":["Vue","store","action","directive","inserted","el","binding","vnode","actionName","arg","roles","getters","elVal","context","$route","meta","permission","permissionId","String","permissions","forEach","p","includes","actionList","parentNode","removeChild","style","display"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMC,MAAM,GAAGF,GAAG,CAACG,SAAJ,CAAc,QAAd,EAAwB;AACrCC,EAAAA,QAAQ,EAAE,kBAAUC,EAAV,EAAcC,OAAd,EAAuBC,KAAvB,EAA8B;AACtC,QAAMC,UAAU,GAAGF,OAAO,CAACG,GAA3B;AACA,QAAMC,KAAK,GAAGT,KAAK,CAACU,OAAN,CAAcD,KAA5B;AACA,QAAME,KAAK,GAAGL,KAAK,CAACM,OAAN,CAAcC,MAAd,CAAqBC,IAArB,CAA0BC,UAAxC;AACA,QAAMC,YAAY,GAAGL,KAAK,YAAYM,MAAjB,IAA2B,CAACN,KAAD,CAA3B,IAAsCA,KAA3D;AACAF,IAAAA,KAAK,CAACS,WAAN,CAAkBC,OAAlB,CAA0B,UAAAC,CAAC,EAAI;AAC7B,UAAI,CAACJ,YAAY,CAACK,QAAb,CAAsBD,CAAC,CAACJ,YAAxB,CAAL,EAA4C;AAC1C;AACD;;AACD,UAAII,CAAC,CAACE,UAAF,IAAgB,CAACF,CAAC,CAACE,UAAF,CAAaD,QAAb,CAAsBd,UAAtB,CAArB,EAAwD;AACtDH,QAAAA,EAAE,CAACmB,UAAH,IAAiBnB,EAAE,CAACmB,UAAH,CAAcC,WAAd,CAA0BpB,EAA1B,CAAjB,KAAmDA,EAAE,CAACqB,KAAH,CAASC,OAAT,GAAmB,MAAtE;AACD;AACF,KAPD;AAQD;AAdoC,CAAxB,CAAf;AAiBA,eAAezB,MAAf","sourcesContent":["import Vue from 'vue'\nimport store from '@/store'\n\n/**\n * Action 权限指令\n * 指令用法：\n *  - 在需要控制 action 级别权限的组件上使用 v-action:[method] , 如下：\n *    <i-button v-action:add >添加用户</a-button>\n *    <a-button v-action:delete>删除用户</a-button>\n *    <a v-action:edit @click=\"edit(record)\">修改</a>\n *\n *  - 当前用户没有权限时，组件上使用了该指令则会被隐藏\n *  - 当后台权限跟 pro 提供的模式不同时，只需要针对这里的权限过滤进行修改即可\n *\n *  @see https://github.com/vueComponent/ant-design-vue-pro/pull/53\n */\nconst action = Vue.directive('action', {\n  inserted: function (el, binding, vnode) {\n    const actionName = binding.arg\n    const roles = store.getters.roles\n    const elVal = vnode.context.$route.meta.permission\n    const permissionId = elVal instanceof String && [elVal] || elVal\n    roles.permissions.forEach(p => {\n      if (!permissionId.includes(p.permissionId)) {\n        return\n      }\n      if (p.actionList && !p.actionList.includes(actionName)) {\n        el.parentNode && el.parentNode.removeChild(el) || (el.style.display = 'none')\n      }\n    })\n  }\n})\n\nexport default action\n"]}]}