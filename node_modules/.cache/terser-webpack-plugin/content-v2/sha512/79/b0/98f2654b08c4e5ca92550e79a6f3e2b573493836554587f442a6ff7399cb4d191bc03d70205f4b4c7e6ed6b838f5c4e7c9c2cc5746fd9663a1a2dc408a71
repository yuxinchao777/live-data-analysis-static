{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-b054abb4\"],{c92f:function(t,e,n){},dbe6:function(t,e,n){\"use strict\";var a=n(\"c92f\"),i=n.n(a);i.a},ef96:function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",[n(\"div\",{staticClass:\"ant-title\"},[t._v(t._s(t.projectName)+\"详细数据\")]),n(\"a-table\",{attrs:{pagination:t.showPagination,\"row-key\":\"index\",columns:t.projectColumns,\"data-source\":t.loadProjectData,expandedRowKeys:t.expandedRowKeys},on:{expand:t.expand},scopedSlots:t._u([{key:\"delayed\",fn:function(e){return[n(\"span\",{class:\"正常\"==e.delay?\"normalColumn\":\"warningColumn\"},[t._v(\" \"+t._s(e.delay)+\" \")])]}},{key:\"rdJobDays\",fn:function(e){return[n(\"span\",[t._v(\" \"+t._s(t.getFixedNumber(e.rdJobDays))+\" \")])]}},{key:\"qaJobDays\",fn:function(e){return[n(\"span\",[t._v(\" \"+t._s(t.getFixedNumber(e.qaJobDays))+\" \")])]}},{key:\"expandedRowRender\",fn:function(e){return n(\"div\",{staticStyle:{margin:\"0\"}},[\"date\"in t.loadProjectData[e.index].detail[0]?n(\"div\",[n(\"a-tabs\",{staticStyle:{\"margin-left\":\"-48px\"},attrs:{\"default-active-key\":0,\"tab-position\":\"left\"}},t._l(t.loadProjectData[e.index].detail,(function(e,a){return n(\"a-tab-pane\",{key:a,attrs:{tab:e.date}},[n(\"a-row\",[n(\"div\",{staticStyle:{width:\"100%\"},domProps:{innerHTML:t._s(e.raw)}})])],1)})),1)],1):n(\"div\",[n(\"span\",{domProps:{innerHTML:t._s(t.loadProjectData[e.index].detail[0].raw)}})])])}}])})],1)},i=[],o=(n(\"a9e3\"),n(\"b775\")),d=n(\"2ef0\"),s=n.n(d),l=n(\"2b0e\"),r={components:{},data:function(){return{showPagination:!1,loadingDetail:!1,projectName:this.$route.query.projectName,expandedRowKeys:[],projectColumns:[{title:\"序号\",dataIndex:\"index\",key:\"index\",width:90},{title:\"需求名称\",dataIndex:\"functionName\",key:\"functionName\",width:400},{title:\"需求等级\",dataIndex:\"function_level\",key:\"function_level\",align:\"center\"},{title:\"开发人日\",key:\"rdJobDays\",align:\"right\",scopedSlots:{customRender:\"rdJobDays\"}},{title:\"测试人日\",key:\"qaJobDays\",align:\"right\",scopedSlots:{customRender:\"qaJobDays\"}},{title:\"开发测试人日比\",dataIndex:\"ManDayRatio\",key:\"ManDayRatio\",align:\"center\"},{title:\"是否延期提测\",key:\"delay\",align:\"center\",scopedSlots:{customRender:\"delayed\"}},{title:\"冒烟结果\",dataIndex:\"smoking\",key:\"smoking\",align:\"center\"}],detailCache:{},loadProjectData:[]}},created:function(){this.init()},methods:{init:function(){var t=this;o[\"b\"].post(\"/BusinessController/getFunctionDetails\",{stime:this.$route.query.stime,etime:this.$route.query.etime,projectId:this.$route.query.projectId}).then((function(e){for(var n=e.data[0].list,a=0;a<n.length;a++)n[a].index=a+1,\"function_level\"in n[a]&&!s.a.isEmpty(n[a].function_level)||(n[a].function_level=\"-\"),\"smoking\"in n[a]||(n[a].smoking=\"-\"),n[a].detail=[{raw:\"加载中\"}];t.loadProjectData=n,n.length>10&&(t.showPagination=!0)})).catch((function(t){}))},expand:function(t,e){this.expandedRowKeys=t?[e.index]:[],this.getRowDetail(e)},getRowDetail:function(t){t.index in this.detailCache||this.getQaDaily(t)},getQaDaily:function(t){var e=this;this.loadingDetail=!0,o[\"b\"].get(\"/BusinessController/getQaDaily?functionId=\"+t.functionId).then((function(n){var a=n.data.length>0?n.data:[{raw:\"暂无测试进度数据\"}];l[\"a\"].set(e.detailCache,t.index,a),e.loadProjectData[t.index].detail=a,e.loadingDetail=!1})).catch((function(t){this.loadingDetail=!1}))},getFixedNumber:function(t){return Math.round(100*Number(t))/100}},computed:{title:function(){return this.$route.meta.title}}},c=r,u=(n(\"dbe6\"),n(\"2877\")),y=Object(u[\"a\"])(c,a,i,!1,null,\"b128d902\",null);e[\"default\"]=y.exports}}]);","extractedComments":[]}