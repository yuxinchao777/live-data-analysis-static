{"remainingRequest":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/momo/code/vue/live-data-analysis-static/src/views/dashboard/ProjectDetail.vue?vue&type=style&index=0&id=97f6f076&lang=less&scoped=true&","dependencies":[{"path":"/Users/momo/code/vue/live-data-analysis-static/src/views/dashboard/ProjectDetail.vue","mtime":1626864386000},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/css-loader/dist/cjs.js","mtime":1647586362967},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1647586368323},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/postcss-loader/src/index.js","mtime":1647586367416},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/less-loader/dist/cjs.js","mtime":1647586450216},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":1647586199048},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js","mtime":1647586368323}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmV4dHJhLXdyYXBwZXIgewogIGxpbmUtaGVpZ2h0OiA1NXB4OwogIHBhZGRpbmctcmlnaHQ6IDI0cHg7CgogIC5leHRyYS1pdGVtIHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIG1hcmdpbi1yaWdodDogMjRweDsKCiAgICBhIHsKICAgICAgbWFyZ2luLWxlZnQ6IDI0cHg7CiAgICB9CiAgfQp9CgouYW50ZC1wcm8tcGFnZXMtZGFzaGJvYXJkLWFuYWx5c2lzLXR3b0NvbExheW91dCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGRpc3BsYXk6IGZsZXg7CiAgZGlzcGxheTogYmxvY2s7CiAgZmxleC1mbG93OiByb3cgd3JhcDsKfQoKLmFudGQtcHJvLXBhZ2VzLWRhc2hib2FyZC1hbmFseXNpcy1zYWxlc0NhcmQgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogY2FsYygxMDAlIC0gMjRweCk7CiAgLyogL2RlZXAvIC5hbnQtY2FyZC1oZWFkIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB9ICovCn0KCi5hbnQtY29sLTMgewogIHdpZHRoOiAzMyU7Cn0KCi5hbnQtZm9udC0yIHsKICBmb250LXNpemU6IDEzcHg7Cn0KLmRhc2hib2FyZC1hbmFseXNpcy1pY29uR3JvdXAgewogIGkgewogICAgbWFyZ2luLWxlZnQ6IDE2cHg7CiAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQ1KTsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHRyYW5zaXRpb246IGNvbG9yIDAuMzJzOwogICAgY29sb3I6IGJsYWNrOwogIH0KfQouYW5hbHlzaXMtc2FsZXNUeXBlUmFkaW8gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICByaWdodDogNTRweDsKICBib3R0b206IDEycHg7Cn0KCi50aW1lUmFkaW9Hcm91cCB7CiAgbWFyZ2luLWxlZnQ6IDU0cHg7Cn0KCi50aW1lUmFkaW9CdXR0b25zLmFudC1yYWRpby1idXR0b24td3JhcHBlcjo6YmVmb3JlIHsKICBkaXNwbGF5OiBub25lOwogIHZpc2liaWxpdHk6IGhpZGRlbjsKfQoudGltZVJhZGlvQnV0dG9ucyB7CiAgYm9yZGVyOiBub25lOwp9Ci50aW1lUmFkaW9Hcm91cCB7CiAgbWFyZ2luLWxlZnQ6IDU0cHg7CiAgYm9yZGVyOiBub25lOwp9Ci5hbnQtcmFkaW8tYnV0dG9uLXdyYXBwZXItY2hlY2tlZDpub3QoLmFudC1yYWRpby1idXR0b24td3JhcHBlci1kaXNhYmxlZCkgewogIHotaW5kZXg6IDE7CiAgY29sb3I6ICMxODkwZmY7CiAgYmFja2dyb3VuZDogI2ZmZjsKICBib3JkZXItY29sb3I6ICNmZmZmZmY7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAtMXB4IDAgMCAwICNmZmZmZmY7CiAgYm94LXNoYWRvdzogLTFweCAwIDAgMCAjZmZmZmZmOwp9Ci5hbnQtdGl0bGUgewogIGNvbG9yOiAjMTg5MGZmOwogIGZvbnQtc2l6ZTogMTZweDsKICBtYXJnaW4tYm90dG9tOiAyNHB4OwogIGZvbnQtd2VpZ2h0OiA1MDA7Cn0KLndhcm5pbmdDb2x1bW4gewogIGNvbG9yOiAjZWYzYzU5OwogIGZvbnQtd2VpZ2h0OiBib2xkOwogIHBhZGRpbmc6IDVweDsKfQo="},{"version":3,"sources":["ProjectDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuLA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProjectDetail.vue","sourceRoot":"src/views/dashboard","sourcesContent":["<template>\n  <div>\n    <div class=\"ant-title\">{{ projectName }}详细数据</div>\n    <a-table\n      :pagination=\"showPagination\"\n      row-key=\"index\"\n      :columns=\"projectColumns\"\n      :data-source=\"loadProjectData\"\n      @expand=\"expand\"\n      :expandedRowKeys=\"expandedRowKeys\"\n    >\n      <template slot=\"delayed\" slot-scope=\"record\">\n        <span :class=\"record.delay == '正常' ? 'normalColumn' : 'warningColumn'\">\n          {{ record.delay }}\n        </span>\n      </template>\n      <template slot=\"rdJobDays\" slot-scope=\"record\">\n        <span>\n          {{ getFixedNumber(record.rdJobDays) }}\n        </span>\n      </template>\n      <template slot=\"qaJobDays\" slot-scope=\"record\">\n        <span>\n          {{ getFixedNumber(record.qaJobDays) }}\n        </span>\n      </template>\n      <div slot=\"expandedRowRender\" slot-scope=\"record\" style=\"margin: 0\">\n        <div v-if=\"'date' in loadProjectData[record.index].detail[0]\">\n          <a-tabs :default-active-key=\"0\" tab-position=\"left\" style=\"margin-left: -48px\">\n            <a-tab-pane v-for=\"(detail, index) in loadProjectData[record.index].detail\" :key=\"index\" :tab=\"detail.date\"\n              ><a-row>\n                <div v-html=\"detail.raw\" style=\"width: 100%\"></div>\n              </a-row>\n            </a-tab-pane>\n          </a-tabs>\n        </div>\n        <div v-else><span v-html=\"loadProjectData[record.index].detail[0].raw\"></span></div>\n      </div>\n    </a-table>\n  </div>\n</template>\n\n<script>\nimport { axios } from '@/utils/request'\nimport _ from 'lodash'\nimport Vue from 'vue'\n\nexport default {\n  components: {},\n  data() {\n    return {\n      showPagination: false,\n      loadingDetail: false,\n      projectName: this.$route.query.projectName,\n      expandedRowKeys: [],\n      projectColumns: [\n        {\n          title: '序号',\n          dataIndex: 'index',\n          key: 'index',\n          width: 90,\n        },\n        {\n          title: '需求名称',\n          dataIndex: 'functionName',\n          key: 'functionName',\n          width: 400,\n        },\n        {\n          title: '需求等级',\n          dataIndex: 'function_level',\n          key: 'function_level',\n          align: 'center',\n        },\n        {\n          title: '开发人日',\n          key: 'rdJobDays',\n          align: 'right',\n          scopedSlots: { customRender: 'rdJobDays' },\n        },\n        {\n          title: '测试人日',\n          key: 'qaJobDays',\n          align: 'right',\n          scopedSlots: { customRender: 'qaJobDays' },\n        },\n        {\n          title: '开发测试人日比',\n          dataIndex: 'ManDayRatio',\n          key: 'ManDayRatio',\n          align: 'center',\n        },\n        {\n          title: '是否延期提测',\n          key: 'delay',\n          align: 'center',\n          scopedSlots: { customRender: 'delayed' },\n        },\n        {\n          title: '冒烟结果',\n          dataIndex: 'smoking',\n          key: 'smoking',\n          align: 'center',\n        },\n      ],\n      detailCache: {},\n      loadProjectData: [],\n    }\n  },\n  created() {\n    this.init()\n  },\n  methods: {\n    init() {\n      axios\n        .post('/BusinessController/getFunctionDetails', {\n          stime: this.$route.query.stime,\n          etime: this.$route.query.etime,\n          projectId: this.$route.query.projectId,\n        })\n        .then((res) => {\n          let data = res.data[0].list\n          for (let i = 0; i < data.length; i++) {\n            data[i].index = i + 1\n            if (!('function_level' in data[i]) || _.isEmpty(data[i].function_level)) {\n              data[i].function_level = '-'\n            }\n            if (!('smoking' in data[i])) {\n              data[i].smoking = '-'\n            }\n            data[i].detail = [{ raw: '加载中' }]\n          }\n          this.loadProjectData = data\n          if (data.length > 10) {\n            this.showPagination = true\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    },\n    expand(expanded, record) {\n      console.log('expand ', expanded, record)\n      if (expanded) {\n        this.expandedRowKeys = [record.index]\n      } else {\n        this.expandedRowKeys = []\n      }\n      this.getRowDetail(record)\n    },\n    getRowDetail(record) {\n      if (!(record.index in this.detailCache)) {\n        this.getQaDaily(record)\n      }\n    },\n    getQaDaily(record) {\n      this.loadingDetail = true\n      axios\n        .get('/BusinessController/getQaDaily?functionId=' + record.functionId)\n        .then((res) => {\n          let data = res.data.length > 0 ? res.data : [{ raw: '暂无测试进度数据' }]\n          Vue.set(this.detailCache, record.index, data)\n          this.loadProjectData[record.index].detail = data\n          this.loadingDetail = false\n        })\n        .catch(function (error) {\n          console.log(error)\n          this.loadingDetail = false\n        })\n    },\n    getFixedNumber(day) {\n      return Math.round(Number(day) * 100) / 100\n    },\n  },\n  computed: {\n    title() {\n      return this.$route.meta.title\n    },\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.extra-wrapper {\n  line-height: 55px;\n  padding-right: 24px;\n\n  .extra-item {\n    display: inline-block;\n    margin-right: 24px;\n\n    a {\n      margin-left: 24px;\n    }\n  }\n}\n\n.antd-pro-pages-dashboard-analysis-twoColLayout {\n  position: relative;\n  display: flex;\n  display: block;\n  flex-flow: row wrap;\n}\n\n.antd-pro-pages-dashboard-analysis-salesCard {\n  width: 100%;\n  height: calc(100% - 24px);\n  /* /deep/ .ant-card-head {\n    position: relative;\n  } */\n}\n\n.ant-col-3 {\n  width: 33%;\n}\n\n.ant-font-2 {\n  font-size: 13px;\n}\n.dashboard-analysis-iconGroup {\n  i {\n    margin-left: 16px;\n    color: rgba(0, 0, 0, 0.45);\n    cursor: pointer;\n    transition: color 0.32s;\n    color: black;\n  }\n}\n.analysis-salesTypeRadio {\n  position: absolute;\n  right: 54px;\n  bottom: 12px;\n}\n\n.timeRadioGroup {\n  margin-left: 54px;\n}\n\n.timeRadioButtons.ant-radio-button-wrapper::before {\n  display: none;\n  visibility: hidden;\n}\n.timeRadioButtons {\n  border: none;\n}\n.timeRadioGroup {\n  margin-left: 54px;\n  border: none;\n}\n.ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled) {\n  z-index: 1;\n  color: #1890ff;\n  background: #fff;\n  border-color: #ffffff;\n  -webkit-box-shadow: -1px 0 0 0 #ffffff;\n  box-shadow: -1px 0 0 0 #ffffff;\n}\n.ant-title {\n  color: #1890ff;\n  font-size: 16px;\n  margin-bottom: 24px;\n  font-weight: 500;\n}\n.warningColumn {\n  color: #ef3c59;\n  font-weight: bold;\n  padding: 5px;\n}\n</style>\n"]}]}