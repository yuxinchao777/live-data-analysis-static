{"remainingRequest":"/Users/momo/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/momo/vue/live-data-analysis-static/src/views/qadata/qadate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/momo/vue/live-data-analysis-static/src/views/qadata/qadate.vue","mtime":1629968740404},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":1626939577620},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/babel-loader/lib/index.js","mtime":1626939577610},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":1626939577620},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js","mtime":1626939590555}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGF4aW9zIH0gZnJvbSAnQC91dGlscy9yZXF1ZXN0JwoKY29uc3QgY29sdW1ucyA9IFsKICB7IHRpdGxlOiAn5aeT5ZCNJywgd2lkdGg6IDUwLCBkYXRhSW5kZXg6ICduYW1lJywga2V5OiAnbmFtZSd9LAogIHsgdGl0bGU6ICflt6Xml7bvvIhI77yJJywgd2lkdGg6IDUwLCBkYXRhSW5kZXg6ICdqb2JIb3VycycsIGtleTogJ3VzZV90aW1lJ30sCiAgeyB0aXRsZTogJ2Nhc2XmlbAnLCBkYXRhSW5kZXg6ICdjYXNlTnVtJywga2V5OiAnY2FzZU51bScsIHdpZHRoOiA1MCB9LAogIHsgdGl0bGU6ICdidWfmlbAnLCBkYXRhSW5kZXg6ICdidWdOdW0nLCBrZXk6ICdidWdOdW0nLCB3aWR0aDogNTAgfSwKICB7CiAgICB0aXRsZTogJ+ivpuaDhScsCiAgICBrZXk6ICd0YXNrRGV0YWlsJywKICAgIHdpZHRoOiAxMDAsCiAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdhY3Rpb24nIH0KICB9Cl0KCgpjb25zdCBxYWRhdGFzID0gewogIHN0YXR1c2NvZGUgOiAyMDAsCiAgZGF0YSA6IHsKICAgIGFwYXJ0bWVudHMgOlsKICAgICAge2lkOjEsbmFtZToi5ZWG5LiaUUEifSwKICAgIF0sCiAgfQp9CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbHVtbnMsCiAgICAgIHFhZGF0YXMsCiAgICAgIHFhZGF0YTpbXSwKICAgICAgZGF0ZVJhbmdlOiBbXSwKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIGFwYXJ0bWVudGlkOjAsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCgogICAgfQogIH0sCgogIG1ldGhvZHM6ewogICAgaW5pdCgpewogICAgICB0aGlzLmRhdGVSYW5nZSA9W3RoaXMuZGF5anMoKS5zdGFydE9mKCd3ZWVrJykuYWRkKDEsImRheSIpLmZvcm1hdCgnZGRkZCBNTU0gREQgWVlZWSBISDptbTpzcyBaWicpLAogICAgICAgIHRoaXMuZGF5anMoKS5lbmRPZignd2VlaycpLmFkZCgxLCJkYXkiKS5mb3JtYXQoJ2RkZGQgTU1NIEREIFlZWVkgSEg6bW06c3MgWlonKV0KICAgICAgbGV0IHRlbXB0aW1lID0gW3RoaXMuZGF5anMoKS5zdGFydE9mKCd3ZWVrJykuYWRkKDEsImRheSIpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpLAogICAgICAgIHRoaXMuZGF5anMoKS5lbmRPZignd2VlaycpLmFkZCgxLCJkYXkiKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKV0KICAgICAgdGhpcy5nZXRxYWRhdGUodGVtcHRpbWVbMF0sdGVtcHRpbWVbMV0pCiAgICB9LAogICAgZ2V0cWFkYXRlKHN0YXJ0dGltZSxlbmR0aW1lKXsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlCiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoJy9xYVN0YXRpc3RpY3MnLCB7CiAgICAgICAgICBzdGFydFRpbWU6IHN0YXJ0dGltZSwKICAgICAgICAgIGVuZFRpbWU6IGVuZHRpbWUsCiAgICAgICAgICBhcGFydG1lbnRpZDogdGhpcy5hcGFydG1lbnRpZAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgdGhpcy5xYWRhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICApLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5YaF572R5pWw5o2u6I635Y+W5aSx6LSlJykKICAgICAgICB9CiAgICAgICkKICAgIH0sCiAgICBzZXRhcGFydG1lbnRpZChhcGFydG1lbnRpZCl7CiAgICAgIHRoaXMuYXBhcnRtZW50aWQ9YXBhcnRtZW50aWQKICAgIH0sCiAgICBnZXRuZWVkdGltZWxpc3QoZGF0ZVJhbmdlKXsKICAgICAgbGV0IGN1cnJlbnRTdGFydFRpbWUgPSB0aGlzLmRheWpzKGRhdGVSYW5nZVswXS52YWx1ZU9mKCkpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpCiAgICAgIGxldCBjdXJyZW50RW5kVGltZSA9IHRoaXMuZGF5anMoZGF0ZVJhbmdlWzFdLnZhbHVlT2YoKSkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykKICAgICAgdGhpcy5nZXRxYWRhdGUoY3VycmVudFN0YXJ0VGltZSxjdXJyZW50RW5kVGltZSkKICAgIH0sCiAgICBqdW1wdG8oaHJlZmhvc3QpewogICAgICB3aW5kb3cub3BlbihocmVmaG9zdCkKICAgIH0sCiAgICBnZXRjdXJyZW50dGltZShyYW5nZXRpbWUpewogICAgICBjb25zdCBzdGFydHRpbWUgPSB0aGlzLmRheWpzKHJhbmdldGltZVswXSkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykKICAgICAgY29uc3QgZW5kdGltZSA9IHRoaXMuZGF5anMocmFuZ2V0aW1lWzFdKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKQogICAgICByZXR1cm4gW3N0YXJ0dGltZSxlbmR0aW1lXQogICAgfQogIH0sCiAgY29tcHV0ZWQ6ewogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpCiAgfQp9Cgo="},{"version":3,"sources":["qadate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"qadate.vue","sourceRoot":"src/views/qadata","sourcesContent":["<template>\n  <div>\n    <div>\n      <!--部门下拉框-->\n      部门<a-select default-value=\"商业QA\" style=\"width: 100px;margin-left: 5px\">\n      <a-select-option v-for='apartment in qadatas.data.apartments' :key='apartment.id' :value=\"apartment.name\" @click='setapartmentid(apartment.id)' >\n        {{apartment.name}}\n      </a-select-option>\n    </a-select>\n      <!--时间选择框-->\n      <a-range-picker class='a-range-picker' style='width:400px' show-time v-model:value = \"dateRange\">\n        <template slot='renderExtraFooter' >\n          日期选择\n        </template>\n      </a-range-picker>\n      <a-button type='primary' icon='search' @click='getneedtimelist(dateRange)'>\n        查询\n      </a-button>\n    </div>\n    <a-table :columns='columns' :data-source='qadata' style='margin-top: 20px' :loading='isLoading'\n             :pagination='{defaultPageSize:100 }'>\n      <a slot='action' slot-scope='text,record'>\n        <!--        {{record.details}}-->\n        <a-dropdown>\n          <a class='ant-dropdown-link'>\n            查看详情\n            <a-icon type='down' />\n          </a>\n          <a-menu slot='overlay' v-if='record.taskDetail && record.taskDetail.length'\n                  style='overflow: scroll;width:auto;height: 175px'>\n            <a-menu-item v-for='(detail,index) in record.taskDetail' :key='index'\n                         @click='jumpto(detail && detail.taskUrl)'>\n              <h4 style='size: A4; color: #096dd9'> {{ detail.taskName }}</h4>\n            </a-menu-item>\n          </a-menu>\n          <a-menu slot=\"overlay\" v-else>\n            <a-menu-item>\n              <h4 style='size: A4;'>无</h4>\n            </a-menu-item>\n\n          </a-menu>\n        </a-dropdown>\n      </a>\n    </a-table>\n  </div>\n</template>\n\n<script>\nimport { axios } from '@/utils/request'\n\nconst columns = [\n  { title: '姓名', width: 50, dataIndex: 'name', key: 'name'},\n  { title: '工时（H）', width: 50, dataIndex: 'jobHours', key: 'use_time'},\n  { title: 'case数', dataIndex: 'caseNum', key: 'caseNum', width: 50 },\n  { title: 'bug数', dataIndex: 'bugNum', key: 'bugNum', width: 50 },\n  {\n    title: '详情',\n    key: 'taskDetail',\n    width: 100,\n    scopedSlots: { customRender: 'action' }\n  }\n]\n\n\nconst qadatas = {\n  statuscode : 200,\n  data : {\n    apartments :[\n      {id:1,name:\"商业QA\"},\n    ],\n  }\n}\n\nexport default {\n  data() {\n    return {\n      columns,\n      qadatas,\n      qadata:[],\n      dateRange: [],\n      visible: false,\n      apartmentid:0,\n      isLoading: false,\n\n    }\n  },\n\n  methods:{\n    init(){\n      this.dateRange =[this.dayjs().startOf('week').add(1,\"day\").format('dddd MMM DD YYYY HH:mm:ss ZZ'),\n        this.dayjs().endOf('week').add(1,\"day\").format('dddd MMM DD YYYY HH:mm:ss ZZ')]\n      let temptime = [this.dayjs().startOf('week').add(1,\"day\").format('YYYY-MM-DD HH:mm:ss'),\n        this.dayjs().endOf('week').add(1,\"day\").format('YYYY-MM-DD HH:mm:ss')]\n      this.getqadate(temptime[0],temptime[1])\n    },\n    getqadate(starttime,endtime){\n      this.isLoading = true\n      axios\n        .post('/qaStatistics', {\n          startTime: starttime,\n          endTime: endtime,\n          apartmentid: this.apartmentid\n        })\n        .then((response) => {\n          if (response.code === 200) {\n            this.isLoading = false\n            this.qadata = response.data\n          }\n        }\n      ).catch((error) => {\n          this.$message.error('内网数据获取失败')\n        }\n      )\n    },\n    setapartmentid(apartmentid){\n      this.apartmentid=apartmentid\n    },\n    getneedtimelist(dateRange){\n      let currentStartTime = this.dayjs(dateRange[0].valueOf()).format('YYYY-MM-DD HH:mm:ss')\n      let currentEndTime = this.dayjs(dateRange[1].valueOf()).format('YYYY-MM-DD HH:mm:ss')\n      this.getqadate(currentStartTime,currentEndTime)\n    },\n    jumpto(hrefhost){\n      window.open(hrefhost)\n    },\n    getcurrenttime(rangetime){\n      const starttime = this.dayjs(rangetime[0]).format('YYYY-MM-DD HH:mm:ss')\n      const endtime = this.dayjs(rangetime[1]).format('YYYY-MM-DD HH:mm:ss')\n      return [starttime,endtime]\n    }\n  },\n  computed:{\n  },\n  created() {\n    this.init()\n  }\n}\n\n</script>\n\n<style scoped>\n.a-range-picker{\n  margin-left: 20px;\n  margin-right: 20px;\n}\n\n\n</style>"]}]}