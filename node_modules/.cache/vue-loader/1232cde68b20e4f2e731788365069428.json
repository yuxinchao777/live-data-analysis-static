{"remainingRequest":"/Users/momo/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/momo/vue/live-data-analysis-static/src/views/form/advancedForm/AdvancedForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/momo/vue/live-data-analysis-static/src/views/form/advancedForm/AdvancedForm.vue","mtime":1626864386286},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":1626939577620},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/babel-loader/lib/index.js","mtime":1626939577610},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":1626939577620},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js","mtime":1626939590555}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBSZXBvc2l0b3J5Rm9ybSBmcm9tICcuL1JlcG9zaXRvcnlGb3JtJwppbXBvcnQgVGFza0Zvcm0gZnJvbSAnLi9UYXNrRm9ybScKaW1wb3J0IEZvb3RlclRvb2xCYXIgZnJvbSAnQC9jb21wb25lbnRzL0Zvb3RlclRvb2xiYXInCmltcG9ydCB7IGJhc2VNaXhpbiB9IGZyb20gJ0Avc3RvcmUvYXBwLW1peGluJwoKY29uc3QgZmllbGRMYWJlbHMgPSB7CiAgbmFtZTogJ+S7k+W6k+WQjScsCiAgdXJsOiAn5LuT5bqT5Z+f5ZCNJywKICBvd25lcjogJ+S7k+W6k+euoeeQhuWRmCcsCiAgYXBwcm92ZXI6ICflrqHmibnkuronLAogIGRhdGVSYW5nZTogJ+eUn+aViOaXpeacnycsCiAgdHlwZTogJ+S7k+W6k+exu+WeiycsCiAgbmFtZTI6ICfku7vliqHlkI0nLAogIHVybDI6ICfku7vliqHmj4/ov7AnLAogIG93bmVyMjogJ+aJp+ihjOS6uicsCiAgYXBwcm92ZXIyOiAn6LSj5Lu75Lq6JywKICBkYXRlUmFuZ2UyOiAn55Sf5pWI5pel5pyfJywKICB0eXBlMjogJ+S7u+WKoeexu+WeiycKfQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBZHZhbmNlZEZvcm0nLAogIG1peGluczogW2Jhc2VNaXhpbl0sCiAgY29tcG9uZW50czogewogICAgRm9vdGVyVG9vbEJhciwKICAgIFJlcG9zaXRvcnlGb3JtLAogICAgVGFza0Zvcm0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIG1lbWJlckxvYWRpbmc6IGZhbHNlLAoKICAgICAgLy8gdGFibGUKICAgICAgY29sdW1uczogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5oiQ5ZGY5aeT5ZCNJywKICAgICAgICAgIGRhdGFJbmRleDogJ25hbWUnLAogICAgICAgICAga2V5OiAnbmFtZScsCiAgICAgICAgICB3aWR0aDogJzIwJScsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICduYW1lJyB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+W3peWPtycsCiAgICAgICAgICBkYXRhSW5kZXg6ICd3b3JrSWQnLAogICAgICAgICAga2V5OiAnd29ya0lkJywKICAgICAgICAgIHdpZHRoOiAnMjAlJywKICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ3dvcmtJZCcgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmiYDlsZ7pg6jpl6gnLAogICAgICAgICAgZGF0YUluZGV4OiAnZGVwYXJ0bWVudCcsCiAgICAgICAgICBrZXk6ICdkZXBhcnRtZW50JywKICAgICAgICAgIHdpZHRoOiAnNDAlJywKICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ2RlcGFydG1lbnQnIH0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICAgIGtleTogJ2FjdGlvbicsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdvcGVyYXRpb24nIH0KICAgICAgICB9CiAgICAgIF0sCiAgICAgIGRhdGE6IFsKICAgICAgICB7CiAgICAgICAgICBrZXk6ICcxJywKICAgICAgICAgIG5hbWU6ICflsI/mmI4nLAogICAgICAgICAgd29ya0lkOiAnMDAxJywKICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSwKICAgICAgICAgIGRlcGFydG1lbnQ6ICfooYzmlL/pg6gnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICcyJywKICAgICAgICAgIG5hbWU6ICfmnY7ojoknLAogICAgICAgICAgd29ya0lkOiAnMDAyJywKICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSwKICAgICAgICAgIGRlcGFydG1lbnQ6ICdJVOmDqCcKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogJzMnLAogICAgICAgICAgbmFtZTogJ+eOi+Wwj+W4hScsCiAgICAgICAgICB3b3JrSWQ6ICcwMDMnLAogICAgICAgICAgZWRpdGFibGU6IGZhbHNlLAogICAgICAgICAgZGVwYXJ0bWVudDogJ+i0ouWKoemDqCcKICAgICAgICB9CiAgICAgIF0sCgogICAgICBlcnJvcnM6IFtdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTdWJtaXQgKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICB9LAogICAgbmV3TWVtYmVyICgpIHsKICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5kYXRhLmxlbmd0aAogICAgICB0aGlzLmRhdGEucHVzaCh7CiAgICAgICAga2V5OiBsZW5ndGggPT09IDAgPyAnMScgOiAocGFyc2VJbnQodGhpcy5kYXRhW2xlbmd0aCAtIDFdLmtleSkgKyAxKS50b1N0cmluZygpLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHdvcmtJZDogJycsCiAgICAgICAgZGVwYXJ0bWVudDogJycsCiAgICAgICAgZWRpdGFibGU6IHRydWUsCiAgICAgICAgaXNOZXc6IHRydWUKICAgICAgfSkKICAgIH0sCiAgICByZW1vdmUgKGtleSkgewogICAgICBjb25zdCBuZXdEYXRhID0gdGhpcy5kYXRhLmZpbHRlcihpdGVtID0+IGl0ZW0ua2V5ICE9PSBrZXkpCiAgICAgIHRoaXMuZGF0YSA9IG5ld0RhdGEKICAgIH0sCiAgICBzYXZlUm93IChyZWNvcmQpIHsKICAgICAgdGhpcy5tZW1iZXJMb2FkaW5nID0gdHJ1ZQogICAgICBjb25zdCB7IGtleSwgbmFtZSwgd29ya0lkLCBkZXBhcnRtZW50IH0gPSByZWNvcmQKICAgICAgaWYgKCFuYW1lIHx8ICF3b3JrSWQgfHwgIWRlcGFydG1lbnQpIHsKICAgICAgICB0aGlzLm1lbWJlckxvYWRpbmcgPSBmYWxzZQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeWujOaVtOaIkOWRmOS/oeaBr+OAgicpCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgLy8g5qih5ouf572R57uc6K+35rGC44CB5Y2h6aG/IDgwMG1zCiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICByZXNvbHZlKHsgbG9vcDogZmFsc2UgfSkKICAgICAgICB9LCA4MDApCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuZGF0YS5maW5kKGl0ZW0gPT4gaXRlbS5rZXkgPT09IGtleSkKICAgICAgICB0YXJnZXQuZWRpdGFibGUgPSBmYWxzZQogICAgICAgIHRhcmdldC5pc05ldyA9IGZhbHNlCiAgICAgICAgdGhpcy5tZW1iZXJMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICB0b2dnbGUgKGtleSkgewogICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmRhdGEuZmluZChpdGVtID0+IGl0ZW0ua2V5ID09PSBrZXkpCiAgICAgIHRhcmdldC5fb3JpZ2luYWxEYXRhID0geyAuLi50YXJnZXQgfQogICAgICB0YXJnZXQuZWRpdGFibGUgPSAhdGFyZ2V0LmVkaXRhYmxlCiAgICB9LAogICAgZ2V0Um93QnlLZXkgKGtleSwgbmV3RGF0YSkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhCiAgICAgIHJldHVybiAobmV3RGF0YSB8fCBkYXRhKS5maW5kKGl0ZW0gPT4gaXRlbS5rZXkgPT09IGtleSkKICAgIH0sCiAgICBjYW5jZWwgKGtleSkgewogICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmRhdGEuZmluZChpdGVtID0+IGl0ZW0ua2V5ID09PSBrZXkpCiAgICAgIE9iamVjdC5rZXlzKHRhcmdldCkuZm9yRWFjaChrZXkgPT4geyB0YXJnZXRba2V5XSA9IHRhcmdldC5fb3JpZ2luYWxEYXRhW2tleV0gfSkKICAgICAgdGFyZ2V0Ll9vcmlnaW5hbERhdGEgPSB1bmRlZmluZWQKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2UgKHZhbHVlLCBrZXksIGNvbHVtbikgewogICAgICBjb25zdCBuZXdEYXRhID0gWy4uLnRoaXMuZGF0YV0KICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3RGF0YS5maW5kKGl0ZW0gPT4ga2V5ID09PSBpdGVtLmtleSkKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldFtjb2x1bW5dID0gdmFsdWUKICAgICAgICB0aGlzLmRhdGEgPSBuZXdEYXRhCiAgICAgIH0KICAgIH0sCgogICAgLy8g5pyA57uI5YWo6aG16Z2i5o+Q5LqkCiAgICB2YWxpZGF0ZSAoKSB7CiAgICAgIGNvbnN0IHsgJHJlZnM6IHsgcmVwb3NpdG9yeSwgdGFzayB9LCAkbm90aWZpY2F0aW9uIH0gPSB0aGlzCiAgICAgIGNvbnN0IHJlcG9zaXRvcnlGb3JtID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIHJlcG9zaXRvcnkuZm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyLCB2YWx1ZXMpID0+IHsKICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgcmVqZWN0KGVycikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICB9CiAgICAgICAgICByZXNvbHZlKHZhbHVlcykKICAgICAgICB9KQogICAgICB9KQogICAgICBjb25zdCB0YXNrRm9ybSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0YXNrLmZvcm0udmFsaWRhdGVGaWVsZHMoKGVyciwgdmFsdWVzKSA9PiB7CiAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgIHJlamVjdChlcnIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgfQogICAgICAgICAgcmVzb2x2ZSh2YWx1ZXMpCiAgICAgICAgfSkKICAgICAgfSkKCiAgICAgIC8vIGNsZWFuIHRoaXMuZXJyb3JzCiAgICAgIHRoaXMuZXJyb3JzID0gW10KICAgICAgUHJvbWlzZS5hbGwoW3JlcG9zaXRvcnlGb3JtLCB0YXNrRm9ybV0pLnRoZW4odmFsdWVzID0+IHsKICAgICAgICAkbm90aWZpY2F0aW9uWydlcnJvciddKHsKICAgICAgICAgIG1lc3NhZ2U6ICdSZWNlaXZlZCB2YWx1ZXMgb2YgZm9ybTonLAogICAgICAgICAgZGVzY3JpcHRpb246IEpTT04uc3RyaW5naWZ5KHZhbHVlcykKICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgY29uc3QgZXJyb3JzID0gT2JqZWN0LmFzc2lnbih7fSwgcmVwb3NpdG9yeS5mb3JtLmdldEZpZWxkc0Vycm9yKCksIHRhc2suZm9ybS5nZXRGaWVsZHNFcnJvcigpKQogICAgICAgIGNvbnN0IHRtcCA9IHsgLi4uZXJyb3JzIH0KICAgICAgICB0aGlzLmVycm9yTGlzdCh0bXApCiAgICAgIH0pCiAgICB9LAogICAgZXJyb3JMaXN0IChlcnJvcnMpIHsKICAgICAgaWYgKCFlcnJvcnMgfHwgZXJyb3JzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuZXJyb3JzID0gT2JqZWN0LmtleXMoZXJyb3JzKQogICAgICAgIC5maWx0ZXIoa2V5ID0+IGVycm9yc1trZXldKQogICAgICAgIC5tYXAoa2V5ID0+ICh7CiAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgIG1lc3NhZ2U6IGVycm9yc1trZXldWzBdLAogICAgICAgICAgZmllbGRMYWJlbDogZmllbGRMYWJlbHNba2V5XQogICAgICAgIH0pKQogICAgfSwKICAgIHNjcm9sbFRvRmllbGQgKGZpZWxkS2V5KSB7CiAgICAgIGNvbnN0IGxhYmVsTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGxhYmVsW2Zvcj0iJHtmaWVsZEtleX0iXWApCiAgICAgIGlmIChsYWJlbE5vZGUpIHsKICAgICAgICBsYWJlbE5vZGUuc2Nyb2xsSW50b1ZpZXcodHJ1ZSkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["AdvancedForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdvancedForm.vue","sourceRoot":"src/views/form/advancedForm","sourcesContent":["<template>\n  <page-header-wrapper content=\"高级表单常见于一次性输入和提交大批量数据的场景\">\n    <a-card class=\"card\" title=\"仓库管理\" :bordered=\"false\">\n      <repository-form ref=\"repository\" :showSubmit=\"false\" />\n    </a-card>\n    <a-card class=\"card\" title=\"任务管理\" :bordered=\"false\">\n      <task-form ref=\"task\" :showSubmit=\"false\" />\n    </a-card>\n\n    <!-- table -->\n    <a-card>\n      <a-table\n        :columns=\"columns\"\n        :dataSource=\"data\"\n        :pagination=\"false\"\n        :loading=\"memberLoading\"\n      >\n        <template v-for=\"(col, i) in ['name', 'workId', 'department']\" :slot=\"col\" slot-scope=\"text, record\">\n          <a-input\n            :key=\"col\"\n            v-if=\"record.editable\"\n            style=\"margin: -5px 0\"\n            :value=\"text\"\n            :placeholder=\"columns[i].title\"\n            @change=\"e => handleChange(e.target.value, record.key, col)\"\n          />\n          <template v-else>{{ text }}</template>\n        </template>\n        <template slot=\"operation\" slot-scope=\"text, record\">\n          <template v-if=\"record.editable\">\n            <span v-if=\"record.isNew\">\n              <a @click=\"saveRow(record)\">添加</a>\n              <a-divider type=\"vertical\" />\n              <a-popconfirm title=\"是否要删除此行？\" @confirm=\"remove(record.key)\">\n                <a>删除</a>\n              </a-popconfirm>\n            </span>\n            <span v-else>\n              <a @click=\"saveRow(record)\">保存</a>\n              <a-divider type=\"vertical\" />\n              <a @click=\"cancel(record.key)\">取消</a>\n            </span>\n          </template>\n          <span v-else>\n            <a @click=\"toggle(record.key)\">编辑</a>\n            <a-divider type=\"vertical\" />\n            <a-popconfirm title=\"是否要删除此行？\" @confirm=\"remove(record.key)\">\n              <a>删除</a>\n            </a-popconfirm>\n          </span>\n        </template>\n      </a-table>\n      <a-button style=\"width: 100%; margin-top: 16px; margin-bottom: 8px\" type=\"dashed\" icon=\"plus\" @click=\"newMember\">新增成员</a-button>\n    </a-card>\n\n    <!-- fixed footer toolbar -->\n    <footer-tool-bar :is-mobile=\"isMobile\" :collapsed=\"sideCollapsed\">\n      <span class=\"popover-wrapper\">\n        <a-popover title=\"表单校验信息\" overlayClassName=\"antd-pro-pages-forms-style-errorPopover\" trigger=\"click\" :getPopupContainer=\"trigger => trigger.parentNode\">\n          <template slot=\"content\">\n            <li v-for=\"item in errors\" :key=\"item.key\" @click=\"scrollToField(item.key)\" class=\"antd-pro-pages-forms-style-errorListItem\">\n              <a-icon type=\"cross-circle-o\" class=\"antd-pro-pages-forms-style-errorIcon\" />\n              <div class=\"\">{{ item.message }}</div>\n              <div class=\"antd-pro-pages-forms-style-errorField\">{{ item.fieldLabel }}</div>\n            </li>\n          </template>\n          <span class=\"antd-pro-pages-forms-style-errorIcon\" v-if=\"errors.length > 0\">\n            <a-icon type=\"exclamation-circle\" />{{ errors.length }}\n          </span>\n        </a-popover>\n      </span>\n      <a-button type=\"primary\" @click=\"validate\" :loading=\"loading\">提交</a-button>\n    </footer-tool-bar>\n  </page-header-wrapper>\n</template>\n\n<script>\nimport RepositoryForm from './RepositoryForm'\nimport TaskForm from './TaskForm'\nimport FooterToolBar from '@/components/FooterToolbar'\nimport { baseMixin } from '@/store/app-mixin'\n\nconst fieldLabels = {\n  name: '仓库名',\n  url: '仓库域名',\n  owner: '仓库管理员',\n  approver: '审批人',\n  dateRange: '生效日期',\n  type: '仓库类型',\n  name2: '任务名',\n  url2: '任务描述',\n  owner2: '执行人',\n  approver2: '责任人',\n  dateRange2: '生效日期',\n  type2: '任务类型'\n}\n\nexport default {\n  name: 'AdvancedForm',\n  mixins: [baseMixin],\n  components: {\n    FooterToolBar,\n    RepositoryForm,\n    TaskForm\n  },\n  data () {\n    return {\n      loading: false,\n      memberLoading: false,\n\n      // table\n      columns: [\n        {\n          title: '成员姓名',\n          dataIndex: 'name',\n          key: 'name',\n          width: '20%',\n          scopedSlots: { customRender: 'name' }\n        },\n        {\n          title: '工号',\n          dataIndex: 'workId',\n          key: 'workId',\n          width: '20%',\n          scopedSlots: { customRender: 'workId' }\n        },\n        {\n          title: '所属部门',\n          dataIndex: 'department',\n          key: 'department',\n          width: '40%',\n          scopedSlots: { customRender: 'department' }\n        },\n        {\n          title: '操作',\n          key: 'action',\n          scopedSlots: { customRender: 'operation' }\n        }\n      ],\n      data: [\n        {\n          key: '1',\n          name: '小明',\n          workId: '001',\n          editable: false,\n          department: '行政部'\n        },\n        {\n          key: '2',\n          name: '李莉',\n          workId: '002',\n          editable: false,\n          department: 'IT部'\n        },\n        {\n          key: '3',\n          name: '王小帅',\n          workId: '003',\n          editable: false,\n          department: '财务部'\n        }\n      ],\n\n      errors: []\n    }\n  },\n  methods: {\n    handleSubmit (e) {\n      e.preventDefault()\n    },\n    newMember () {\n      const length = this.data.length\n      this.data.push({\n        key: length === 0 ? '1' : (parseInt(this.data[length - 1].key) + 1).toString(),\n        name: '',\n        workId: '',\n        department: '',\n        editable: true,\n        isNew: true\n      })\n    },\n    remove (key) {\n      const newData = this.data.filter(item => item.key !== key)\n      this.data = newData\n    },\n    saveRow (record) {\n      this.memberLoading = true\n      const { key, name, workId, department } = record\n      if (!name || !workId || !department) {\n        this.memberLoading = false\n        this.$message.error('请填写完整成员信息。')\n        return\n      }\n      // 模拟网络请求、卡顿 800ms\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve({ loop: false })\n        }, 800)\n      }).then(() => {\n        const target = this.data.find(item => item.key === key)\n        target.editable = false\n        target.isNew = false\n        this.memberLoading = false\n      })\n    },\n    toggle (key) {\n      const target = this.data.find(item => item.key === key)\n      target._originalData = { ...target }\n      target.editable = !target.editable\n    },\n    getRowByKey (key, newData) {\n      const data = this.data\n      return (newData || data).find(item => item.key === key)\n    },\n    cancel (key) {\n      const target = this.data.find(item => item.key === key)\n      Object.keys(target).forEach(key => { target[key] = target._originalData[key] })\n      target._originalData = undefined\n    },\n    handleChange (value, key, column) {\n      const newData = [...this.data]\n      const target = newData.find(item => key === item.key)\n      if (target) {\n        target[column] = value\n        this.data = newData\n      }\n    },\n\n    // 最终全页面提交\n    validate () {\n      const { $refs: { repository, task }, $notification } = this\n      const repositoryForm = new Promise((resolve, reject) => {\n        repository.form.validateFields((err, values) => {\n          if (err) {\n            reject(err)\n            return\n          }\n          resolve(values)\n        })\n      })\n      const taskForm = new Promise((resolve, reject) => {\n        task.form.validateFields((err, values) => {\n          if (err) {\n            reject(err)\n            return\n          }\n          resolve(values)\n        })\n      })\n\n      // clean this.errors\n      this.errors = []\n      Promise.all([repositoryForm, taskForm]).then(values => {\n        $notification['error']({\n          message: 'Received values of form:',\n          description: JSON.stringify(values)\n        })\n      }).catch(() => {\n        const errors = Object.assign({}, repository.form.getFieldsError(), task.form.getFieldsError())\n        const tmp = { ...errors }\n        this.errorList(tmp)\n      })\n    },\n    errorList (errors) {\n      if (!errors || errors.length === 0) {\n        return\n      }\n      this.errors = Object.keys(errors)\n        .filter(key => errors[key])\n        .map(key => ({\n          key: key,\n          message: errors[key][0],\n          fieldLabel: fieldLabels[key]\n        }))\n    },\n    scrollToField (fieldKey) {\n      const labelNode = document.querySelector(`label[for=\"${fieldKey}\"]`)\n      if (labelNode) {\n        labelNode.scrollIntoView(true)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .card{\n    margin-bottom: 24px;\n  }\n  .popover-wrapper {\n    /deep/ .antd-pro-pages-forms-style-errorPopover .ant-popover-inner-content {\n      min-width: 256px;\n      max-height: 290px;\n      padding: 0;\n      overflow: auto;\n    }\n  }\n  .antd-pro-pages-forms-style-errorIcon {\n    user-select: none;\n    margin-right: 24px;\n    color: #f5222d;\n    cursor: pointer;\n    i {\n          margin-right: 4px;\n    }\n  }\n  .antd-pro-pages-forms-style-errorListItem {\n    padding: 8px 16px;\n    list-style: none;\n    border-bottom: 1px solid #e8e8e8;\n    cursor: pointer;\n    transition: all .3s;\n\n    &:hover {\n      background: #e6f7ff;\n    }\n    .antd-pro-pages-forms-style-errorIcon {\n      float: left;\n      margin-top: 4px;\n      margin-right: 12px;\n      padding-bottom: 22px;\n      color: #f5222d;\n    }\n    .antd-pro-pages-forms-style-errorField {\n      margin-top: 2px;\n      color: rgba(0,0,0,.45);\n      font-size: 12px;\n    }\n  }\n</style>\n"]}]}