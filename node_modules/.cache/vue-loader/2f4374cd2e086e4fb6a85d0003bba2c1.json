{"remainingRequest":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/momo/code/vue/live-data-analysis-static/src/views/qadata/qadata.vue?vue&type=style&index=0&id=0ad17485&scoped=true&lang=css&","dependencies":[{"path":"/Users/momo/code/vue/live-data-analysis-static/src/views/qadata/qadata.vue","mtime":1650790159209},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/css-loader/dist/cjs.js","mtime":1647848753997},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1647848754116},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/postcss-loader/src/index.js","mtime":1647586367416},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":1647586199048},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js","mtime":1647848754116}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYS1yYW5nZS1waWNrZXIgewogIG1hcmdpbi1sZWZ0OiAyMHB4OwogIG1hcmdpbi1yaWdodDogMjBweDsKfQoKLyogYSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGhlaWdodDogMjJweDsKICBsaW5lLWhlaWdodDogMjJweDsKfSAqLwoKYTpob3ZlciB7CiAgLyogdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7ICovCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM0MDllZmY7Cn0KCi5idWdkZXRhaWwtdGV4dCB7CiAgbWFyZ2luLXRvcDogMTBweDsKICBtYXJnaW4tbGVmdDogNTBweDsKfQo="},{"version":3,"sources":["qadata.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkeA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"qadata.vue","sourceRoot":"src/views/qadata","sourcesContent":["<template>\n  <div>\n    <div v-if=\"showtable\">\n      <div>\n        <!--业务线下拉框-->\n        <a-select default-value=\"商业技术部\" style=\"width: 150px; margin-left: 5px\">\n          <a-select-option\n            v-for=\"group in qadata_groups\"\n            :key=\"group.groupId\"\n            :value=\"group.groupName\"\n            @click=\"setgroupid(group.groupId)\"\n          >\n            {{ group.groupName }}\n          </a-select-option>\n        </a-select>\n\n        <!--项目下拉框-->\n        <a-select default-value=\"所有业务线\" style=\"width: 150px; margin-left: 20px\" :value=\"setprojectname\">\n          <a-select-option\n            v-for=\"project in qadata_projects\"\n            :key=\"project.projectId\"\n            :value=\"project.projectName\"\n            @click=\"setprojectid(project.projectId)\"\n          >\n            {{ project.projectName }}\n          </a-select-option>\n        </a-select>\n\n        <!--时间选择框-->\n        <a-range-picker class=\"a-range-picker\" style=\"width: 400px\" show-time v-model=\"dateRange\">\n          <template slot=\"renderExtraFooter\"> 日期选择</template>\n        </a-range-picker>\n        <!--查询按钮-->\n        <a-button type=\"primary\" icon=\"search\" @click=\"getneedtimelist(dateRange)\"> 查询 </a-button>\n      </div>\n\n      <!--表格-->\n      <a-table\n        :columns=\"columns\"\n        :data-source=\"qadata\"\n        style=\"margin-top: 20px\"\n        :loading=\"isLoading\"\n        :scroll=\"{ x: 1500 }\"\n        :pagination=\"{ defaultPageSize: 100 }\"\n      >\n        <!-- 提交Bug数量 -->\n        <div slot=\"bugNum\" slot-scope=\"text, record\">\n          <!--        {{record.bugNum}}-->\n          <div>\n            <span>代码错误：</span><span>{{ record.betaCodeBugNum }}</span\n            ><br />\n            <span>非代码错误：</span><span>{{ record.betaNotCodeBugNum }}</span>\n            <a-button type=\"primary\" size='small' style=\"margin-top: 10px\" @click=\"showbugdetail(record.userId)\">查看详情</a-button>\n          </div>\n        </div>\n\n        <!-- 线上bug详情列表 -->\n        <div slot=\"onlinebugdetail\" slot-scope=\"text, record\">\n          <!--        {{record.details}}-->\n          <div v-if=\"record.onlineBugDetail && record.onlineBugDetail.length\">\n            <a v-for=\"(detail, index) in record.onlineBugDetail\" :key=\"index\" @click=\"jumpto(detail && detail.bugUrl)\">\n              <span>\n                <span>{{ detail.tbId }}</span>\n              </span>\n              <br />\n            </a>\n          </div>\n          <div v-else>\n            <a>无</a>\n          </div>\n        </div>\n\n        <!-- 任务详情列表 -->\n        <div slot=\"taskDetail\" slot-scope=\"text, record\">\n          <!--        {{record.details}}-->\n          <div v-if=\"record.taskDetail && record.taskDetail.length\">\n            <a v-for=\"(detail, index) in record.taskDetail\" :key=\"index\" @click=\"jumpto(detail && detail.taskUrl)\">\n              <span class=\"record-text\" style=\"margin-top: 20px; margin-bottom: 20px\">\n                <span style=\"color: rgb(0, 209, 178)\">[{{ detail.jobHours }}H]</span>\n                <span>{{ detail.taskName }}</span>\n              </span>\n              <br />\n            </a>\n          </div>\n          <div v-else>\n            <a>无</a>\n          </div>\n        </div>\n      </a-table>\n    </div>\n    <div v-else style=\"width: 500px\">\n      <a-row class=\"bugdetail-text\">\n        <a-col :span=\"8\"><span>技术线:</span> </a-col>\n        <a-col :span=\"12\"\n          ><span style=\"color: #1890ff\">{{ bugdetail.groupName }}</span></a-col\n        >\n      </a-row>\n\n      <a-row class=\"bugdetail-text\">\n        <a-col :span=\"8\"><span>业务线:</span> </a-col>\n        <a-col :span=\"12\"\n          ><span style=\"color: #1890ff\">{{ bugdetail.projectName }}</span></a-col\n        >\n      </a-row>\n\n      <a-row class=\"bugdetail-text\">\n        <a-col :span=\"8\"><span>创建人:</span> </a-col>\n        <a-col :span=\"12\"\n          ><span style=\"color: #1890ff\">{{ bugdetail.name }}</span></a-col\n        >\n      </a-row>\n\n      <a-row class=\"bugdetail-text\">\n        <a-col :span=\"8\"><span>提交Bug数量:</span> </a-col>\n        <a-col :span=\"12\"\n          ><span\n            ><span style=\"color: #1890ff\">代码错误：</span\n            ><span style=\"color: #1890ff\">{{ bugdetail.betaCodeBugNum }}</span\n            ><br />\n            <span style=\"color: #1890ff\">非代码错误：</span\n            ><span style=\"color: #1890ff\">{{ bugdetail.betaNotCodeBugNum }}</span></span\n          >\n        </a-col>\n      </a-row>\n\n      <a-row class=\"bugdetail-text\">\n        <a-col :span=\"8\"><span>总计:</span></a-col>\n        <a-col :span=\"12\"\n          ><span style=\"color: #1890ff\">{{ bugdetail.bugNum }}</span></a-col\n        >\n      </a-row>\n\n      <a-row class=\"bugdetail-text\">\n        <a-col :span=\"8\"><span>代码错误:</span></a-col>\n        <a-col :span=\"12\"\n          ><div v-if=\"bugdetail.array1 && bugdetail.array1.length\">\n            <a v-for=\"(detail, index) in bugdetail.array1\" :key=\"index\" @click=\"jumpto(detail && detail.bugUrl)\">\n              <span>\n                <span>{{ detail.bugId }}</span>\n              </span>\n              <br />\n            </a>\n          </div>\n          <div v-else>\n            <a>无</a>\n          </div>\n        </a-col>\n      </a-row>\n\n      <a-row class=\"bugdetail-text\">\n        <a-col :span=\"8\"><span>体验问题:</span></a-col>\n        <a-col :span=\"12\"\n          ><div v-if=\"bugdetail.array2 && bugdetail.array2.length\">\n            <a v-for=\"(detail, index) in bugdetail.array2\" :key=\"index\" @click=\"jumpto(detail && detail.bugUrl)\">\n              <span>\n                <span>{{ detail.bugId }}</span>\n              </span>\n              <br />\n            </a>\n          </div>\n          <div v-else>\n            <a>无</a>\n          </div>\n        </a-col>\n      </a-row>\n\n      <a-row class=\"bugdetail-text\">\n        <a-col :span=\"8\"><span>产品设计缺陷:</span></a-col>\n        <a-col :span=\"12\"\n          ><div v-if=\"bugdetail.array3 && bugdetail.array3.length\">\n            <a v-for=\"(detail, index) in bugdetail.array3\" :key=\"index\" @click=\"jumpto(detail && detail.bugUrl)\">\n              <span>\n                <span>{{ detail.bugId }}</span>\n              </span>\n              <br />\n            </a>\n          </div>\n          <div v-else>\n            <a>无</a>\n          </div>\n        </a-col>\n      </a-row>\n\n      <a-row class=\"bugdetail-text\">\n        <a-col :span=\"8\"><span>遗留问题:</span></a-col>\n        <a-col :span=\"12\"\n          ><div v-if=\"bugdetail.array4 && bugdetail.array4.length\">\n            <a v-for=\"(detail, index) in bugdetail.array4\" :key=\"index\" @click=\"jumpto(detail && detail.bugUrl)\">\n              <span>\n                <span>{{ detail.bugId }}</span>\n              </span>\n              <br />\n            </a>\n          </div>\n          <div v-else>\n            <a>无</a>\n          </div>\n        </a-col>\n      </a-row>\n\n      <a-button type=\"primary\" style=\"margin-top: 10px; margin-left: 50px\" @click=\"showindex\">返回</a-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment'\nimport 'moment/locale/zh-cn'\nimport { axios } from '@/utils/request'\nimport { forEach } from 'store/storages/all'\n\nconst columns = [\n  { title: '技术线', width: 40, dataIndex: 'groupName', key: 'groupName' },\n  { title: '业务线', width: 40, dataIndex: 'projectName', key: 'projectName' },\n  { title: '姓名', width: 40, dataIndex: 'name', key: 'name' },\n  {\n    title: '用例编写行数',\n    width: 70,\n    dataIndex: 'caseNum',\n    key: 'caseNum',\n    align: 'center',\n    sorter: (a, b) => a.caseNum - b.caseNum,\n  },\n  {\n    title: '用例执行天数',\n    width: 70,\n    dataIndex: 'jobHours',\n    key: 'jobHours',\n    align: 'center',\n    sorter: (a, b) => a.jobHours - b.jobHours,\n  },\n  {\n    title: '提交bug数量',\n    dataIndex: 'bugNum',\n    width: 70,\n    align: 'center',\n    scopedSlots: { customRender: 'bugNum' },\n    sorter: (a, b) => a.bugNum - b.bugNum,\n  },\n  { title: '线上bug数量', width: 60, dataIndex: 'onlineBugNum', key: 'onlineBugNum', align: 'center' },\n  {\n    title: '线上Bug详情列表',\n    dataIndex: 'onlinebugdetail',\n    width: 100,\n    align: 'center',\n    scopedSlots: { customRender: 'onlinebugdetail' },\n  },\n  {\n    title: '任务详情列表',\n    dataIndex: 'taskDetail',\n    width: 250,\n    scopedSlots: { customRender: 'taskDetail' },\n  },\n]\n\nexport default {\n  //测试效能\n  name: 'qadata',\n  data() {\n    return {\n      //表头\n      columns,\n\n      //列表数据\n      qadata: [],\n\n      //技术部\n      qadata_groups: [],\n\n      //业务线\n      qadata_projects: [],\n\n      //小组和业务线\n      qadatas: [],\n\n      //项目id\n      setprojectId: 0,\n\n      //设置项目名称\n      setprojectname: '所有业务线',\n\n      //业务线id\n      setgroupId: 0,\n\n      //时间框\n      dateRange: [],\n\n      isLoading: false,\n\n      showtable: true,\n\n      bugdetail: {},\n    }\n  },\n\n  methods: {\n    init() {\n      //获取业务线\n      this.getproject()\n      \n      //判断是否为周日\n      var temp=this.dayjs().day()\n      if(temp===0){\n        var monday = this.dayjs().startOf('week').add(-6, 'day')\n        var sunday = this.dayjs().endOf('week').add(-6, 'day')\n      }\n      else{\n      //周一 周日\n        var monday = this.dayjs().startOf('week').add(1, 'day')\n        var sunday = this.dayjs().endOf('week').add(1, 'day')\n      }\n\n      //时间转moment对象\n      this.dateRange = [\n        moment(monday.format('dddd MMM DD YYYY HH:mm:ss ZZ')),\n        moment(sunday.format('dddd MMM DD YYYY HH:mm:ss ZZ')),\n      ]\n\n      let temptime = [monday.format('YYYY-MM-DD HH:mm:ss'), sunday.format('YYYY-MM-DD HH:mm:ss')]\n      this.getqadate(temptime[0], temptime[1])\n    },\n    getqadate(starttime, endtime) {\n      this.isLoading = true\n      axios\n        .post('/qaStatistics', {\n          groupId: this.setgroupId,\n          projectId: this.setprojectId,\n          startTime: starttime,\n          endTime: endtime,\n        })\n        .then((response) => {\n          if (response.code === 200) {\n            this.isLoading = false\n            response.data.forEach((item) => {\n              item.jobHours = item.jobHours.toFixed(2)\n            })\n            this.qadata = response.data\n          }\n        })\n        .catch((error) => {\n          this.isLoading = false\n          this.$message.error('内网数据获取失败')\n        })\n    },\n\n    //获取业务线和项目\n    getproject() {\n      axios\n        .get('/project/query')\n        .then((response) => {\n          if (response.code === 200) {\n            this.qadatas = response.data\n\n            var qadata_groups = new Array()\n            var qadata_projects = new Array()\n\n            qadata_groups.push({ groupId: 0, groupName: '商业技术部' })\n\n            qadata_projects.push({ projectId: 0, projectName: '所有业务线' })\n            //获取所有业务线\n            response.data.forEach((groupitem) => {\n              qadata_groups.push({ groupId: groupitem.groupId, groupName: groupitem.groupName })\n\n              //获取所有项目\n              groupitem.projectList.forEach((projectitem) => {\n                qadata_projects.push({ projectId: projectitem.projectId, projectName: projectitem.projectName })\n              })\n            })\n            this.qadata_groups = qadata_groups\n            this.qadata_projects = qadata_projects\n            this.allproject = qadata_projects\n          }\n        })\n        .catch((error) => {\n          this.$message.error('内网数据获取失败')\n        })\n    },\n\n    //设置查询技术部的id\n    setgroupid(groupid) {\n      this.setgroupId = groupid\n      //项目增加所有业务线\n      var temp = [{ projectId: 0, projectName: '所有业务线' }]\n      this.qadatas.forEach((item) => {\n        if (groupid === item.groupId) {\n          this.qadata_projects = temp.concat(item.projectList)\n        } else if (groupid === 0) {\n          this.qadata_projects = this.allproject\n        }\n      })\n      //重置业务线名称和id\n      this.setprojectname = '所有业务线'\n      this.setprojectId = 0\n    },\n\n    //设置查询技术部id\n    setprojectid(projectid) {\n      this.setprojectId = projectid\n      this.qadata_projects.forEach((item) => {\n        if (projectid === item.projectId) {\n          this.setprojectname = item.projectName\n        }\n      })\n    },\n\n    getneedtimelist(dateRange) {\n      if (dateRange.length === 0) {\n        this.$message.info('时间不能为空')\n      }\n\n      let currentStartTime = this.dayjs(dateRange[0].valueOf()).format('YYYY-MM-DD HH:mm:ss')\n      let currentEndTime = this.dayjs(dateRange[1].valueOf()).format('YYYY-MM-DD HH:mm:ss')\n      this.getqadate(currentStartTime, currentEndTime)\n    },\n\n    //点击打开新页面\n    jumpto(hrefhost) {\n      window.open(hrefhost)\n    },\n\n    //时间类型转换\n    getcurrenttime(rangetime) {\n      const starttime = this.dayjs(rangetime[0]).format('YYYY-MM-DD HH:mm:ss')\n      const endtime = this.dayjs(rangetime[1]).format('YYYY-MM-DD HH:mm:ss')\n      return [starttime, endtime]\n    },\n\n    //显示详情\n    showbugdetail(userid) {\n      this.showtable = false\n      this.qadata.forEach((item) => {\n        if (userid === item.userId) {\n          this.bugdetail = item\n\n          //代码错误\n          var array1 = new Array()\n\n          //体验问题\n          var array2 = new Array()\n\n          //产品设计缺陷\n          var array3 = new Array()\n\n          //遗留问题\n          var array4 = new Array()\n\n          item.bugDetail.forEach((item) => {\n            if (item.bugType === '代码错误') {\n              array1.push(item)\n            }\n            if (item.bugType === '体验问题') {\n              array2.push(item)\n            }\n            if (item.bugType === '产品设计问题') {\n              array3.push(item)\n            }\n            if (item.bugType === '遗留问题') {\n              array4.push(item)\n            }\n          })\n          this.bugdetail['array1'] = array1\n          this.bugdetail['array2'] = array2\n          this.bugdetail['array3'] = array3\n          this.bugdetail['array4'] = array4\n        }\n      })\n      console.log(this.bugdetail)\n    },\n\n    //显示表格\n    showindex() {\n      this.showtable = true\n    },\n  },\n  computed: {},\n  created() {\n    this.init()\n  },\n}\n</script>\n\n<style scoped>\n.a-range-picker {\n  margin-left: 20px;\n  margin-right: 20px;\n}\n\n/* a {\n  display: inline-block;\n  height: 22px;\n  line-height: 22px;\n} */\n\na:hover {\n  /* text-decoration: underline; */\n  border-bottom: 1px solid #409eff;\n}\n\n.bugdetail-text {\n  margin-top: 10px;\n  margin-left: 50px;\n}\n</style>"]}]}