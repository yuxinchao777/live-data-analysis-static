{"remainingRequest":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/momo/code/vue/live-data-analysis-static/src/views/qadata/memberconfig.vue?vue&type=style&index=0&id=f673c432&scoped=true&lang=css&","dependencies":[{"path":"/Users/momo/code/vue/live-data-analysis-static/src/views/qadata/memberconfig.vue","mtime":1650530444564},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/css-loader/dist/cjs.js","mtime":1647848753997},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1647848754116},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/postcss-loader/src/index.js","mtime":1647586367416},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":1647586199048},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js","mtime":1647848754116}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm1vZGVsdGV4dHsKICAKICB3aWR0aCA6IDMwMHB4OwogCn0K"},{"version":3,"sources":["memberconfig.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmhBA;;AAEA;;AAEA","file":"memberconfig.vue","sourceRoot":"src/views/qadata","sourcesContent":["<template>\n  <div>\n    <!--业务线下拉框-->\n    <a-select default-value=\"商业技术部\" style=\"width: 150px; margin-left: 5px\">\n      <a-select-option\n        v-for=\"group in qadata_groups\"\n        :key=\"group.groupId\"\n        :value=\"group.groupName\"\n        @click=\"setgroupid(group.groupId)\"\n      >\n        {{ group.groupName }}\n      </a-select-option>\n    </a-select>\n\n    <!--项目下拉框-->\n    <a-select default-value=\"所有业务线\" style=\"width: 150px; margin-left: 20px\" :value=\"setprojectname\">\n      <a-select-option\n        v-for=\"project in qadata_projects\"\n        :key=\"project.projectId\"\n        :value=\"project.projectName\"\n        @click=\"setprojectid(project.projectId)\"\n      >\n        {{ project.projectName }}\n      </a-select-option>\n    </a-select>\n\n    <!--技术类型下拉框-->\n    <a-select default-value=\"所有技术类型\" style=\"width: 150px; margin-left: 20px\">\n      <a-select-option v-for=\"techtype in techtypes\" :key=\"techtype\" :value=\"techtype\" @click=\"settechtype(techtype)\">\n        {{ techtype }}\n      </a-select-option>\n    </a-select>\n\n    <!--查询按钮-->\n    <a-button type=\"primary\" icon=\"search\" @click=\"getmemberdata()\" style=\"margin-left: 20px\"> 查询 </a-button>\n\n    <!--添加按钮-->\n    <a-button type=\"primary\" style=\"margin-left: 20px\" @click=\"showModal(1)\"> 添加成员 </a-button>\n\n    <a-table :columns=\"columns\" :data-source=\"qadata\" style=\"margin-top: 20px\" :pagination=\"{ defaultPageSize: 100 }\">\n      <div slot=\"action\" slot-scope=\"text, record\">\n        <div>\n          <a-button\n            type=\"primary\"\n            @click=\"\n              showModal(\n                2,\n                record.id,\n                record.name,\n                record.groupName,\n                record.groupId,\n                record.projectName,\n                record.projectId,\n                record.tech_stack\n              )\n            \"\n            >编辑</a-button\n          >\n          <a-button\n            v-if=\"record.userType === 1\"\n            type=\"primary\"\n            style=\"margin-left: 10px\"\n            @click=\"setshow(record.id, record.userType)\"\n            >隐藏</a-button\n          >\n          <a-button\n            v-if=\"record.userType === 0\"\n            type=\"primary\"\n            style=\"margin-left: 10px\"\n            @click=\"setshow(record.id, record.userType)\"\n            >显示</a-button\n          >\n        </div>\n      </div>\n    </a-table>\n\n    <div>\n      <a-modal v-model=\"visible\" :title=\"modeltitle\" @ok=\"handleOk\" :afterClose=\"onClose\">\n        <div>\n          <a-row>\n            <a-col :span=\"4\">\n            成员名称:\n            </a-col>\n            <a-col :span=\"12\">\n            <a-select\n              class = 'modeltext'\n              mode=\"combobox\"\n              :disabled=\"cansetname\"\n              allowClear:true\n              showSearch\n              notFoundContent=\"暂无结果\"\n              placeholder=\"请输入成员名称\"\n              v-model=\"setname\"\n              @change=\"getmembersearch(setname)\"\n            >\n              <a-select-option\n                :v-model=\"searchnamelist\"\n                v-for=\"searchname in searchnamelist\"\n                :key=\"searchname.name\"\n                :value=\"searchname.name\"\n                @click=\"setsearchname(searchname.name)\"\n              >\n                {{ searchname.name }}\n              </a-select-option>\n            </a-select>\n            </a-col>\n          </a-row>\n          \n          <a-row style=\"margin-top:20px\">\n            <a-col :span=\"4\">技术线:</a-col>\n            <a-col :span=\"12\">\n            <!--业务线下拉框-->\n            <a-select class = 'modeltext' :value=\"modelgroupname\">\n              <a-select-option\n                v-for=\"group in modelgrouplist\"\n                :key=\"group.groupId\"\n                :value=\"group.groupName\"\n                @click=\"setmodelgroupid(group.groupId)\"\n              >\n                {{ group.groupName }}\n              </a-select-option>\n            </a-select>\n            </a-col>\n          </a-row>\n\n          <a-row style=\"margin-top:20px\">\n            <a-col :span=\"4\">业务线:</a-col>\n            <a-col :span=\"12\">\n            <!--项目下拉框-->\n            <a-select class = 'modeltext'  :value=\"modelprojectname\">\n              <a-select-option\n                v-for=\"project in modelprojectlist\"\n                :key=\"project.projectId\"\n                :value=\"project.projectName\"\n                @click=\"setmodelprojectid(project.projectId)\"\n              >\n                {{ project.projectName }}\n              </a-select-option>\n            </a-select>\n            </a-col>\n          </a-row>\n\n          <a-row style=\"margin-top:20px\">\n            <a-col :span=\"4\">技术类型:</a-col>\n             <a-col :span=\"12\">\n            <!--技术类型下拉框-->\n            <a-select class = 'modeltext' :value=\"modeltechname\">\n              <a-select-option\n                v-for=\"modeltech in modeltechtype\"\n                :key=\"modeltech\"\n                :value=\"modeltech\"\n                @click=\"setmodeltechtype(modeltech)\"\n              >\n                {{ modeltech }}\n              </a-select-option>\n            </a-select>\n            </a-col>\n          </a-row>\n        </div>\n      </a-modal>\n    </div>\n  </div>\n</template>\n<script>\nimport { axios } from '@/utils/request'\nimport { method } from 'lodash'\n\nconst columns = [\n  { title: '姓名', width: 30, dataIndex: 'name', key: 'name' },\n  { title: '技术线', width: 60, dataIndex: 'groupName', key: 'groupName' },\n  { title: '业务线', width: 30, dataIndex: 'projectName', key: 'projectName' },\n  { title: '技术类型', width: 50, dataIndex: 'tech_stack', key: 'tech_stack' },\n  { title: '操作人', width: 30, dataIndex: 'LastOperator', key: 'LastOperator' },\n  { title: '操作时间', width: 60, dataIndex: 'LastOperatorTime', key: 'LastOperatorTime' },\n  {\n    title: '操作',\n    key: 'taskDetail',\n    width: 250,\n    scopedSlots: { customRender: 'action' },\n  },\n]\n\nconst techtypes = ['所有技术类型', 'H5', 'Lua', 'iOS', 'Android', 'JAVA', 'PHP', 'QA']\n\nimport building from '../building.vue'\n\nexport default {\n  //人员维护页面\n  name: 'member',\n  data() {\n    return {\n      //表头\n      columns,\n\n      //列表数据\n      qadata: [],\n\n      //技术部\n      qadata_groups: [],\n\n      //业务线\n      qadata_projects: [],\n\n      //小组和业务线\n      qadatas: [],\n\n      //项目id\n      setprojectId: 0,\n\n      //设置项目名称\n      setprojectname: '所有业务线',\n\n      //业务线id\n      setgroupId: 0,\n\n      //全部技术类型\n      techtypes,\n\n      //techtypeid\n      techtypeid: '0',\n\n      //弹窗是否显示\n      visible: false,\n\n      //模糊搜索人员名称\n      setname: '',\n\n      //模糊搜索人员是否可以编辑\n      cansetname: false,\n\n      //模糊搜索人员列表\n      searchnamelist: [],\n\n      //弹窗的技术部，不包括全部\n      modelgrouplist: [],\n\n      //弹窗的业务线，不包括全部\n      modelprojectlist: [],\n\n      //弹窗用户id\n      modelnameid: 0,\n\n      //弹窗的技术部id\n      modelgroupid: 1,\n\n      //弹窗的业务线id\n      modelprojectid: 1,\n\n      //弹窗中的技术类型\n      modeltechtype: [],\n\n      //弹窗中技术部名称\n      modelgroupname: '',\n\n      //弹窗中业务线名称\n      modelprojectname: '',\n\n      //弹窗中技术类型名称\n      modeltechname: '',\n\n      //弹窗title\n      modeltitle: '编辑',\n    }\n  },\n\n  methods: {\n    init() {\n      //读取操作人\n      var tempname = localStorage.getItem('momoname')\n      var tempmomoid = localStorage.getItem('momoid')\n      this.operatorName = tempname + '(' + tempmomoid + ')'\n\n      //获取业务线\n      this.getproject()\n\n      //获取列表数据\n      this.getmemberdata()\n    },\n\n    //设置查询技术部的id\n    setgroupid(groupid) {\n      this.setgroupId = groupid\n      //项目增加所有业务线\n      var temp = [{ projectId: 0, projectName: '所有业务线' }]\n      this.qadatas.forEach((item) => {\n        if (groupid === item.groupId) {\n          this.qadata_projects = temp.concat(item.projectList)\n        } else if (groupid === 0) {\n          this.qadata_projects = this.allproject\n        }\n      })\n      //重置业务线名称和id\n      this.setprojectname = '所有业务线'\n      this.setprojectId = 0\n    },\n\n    //设置查询技术部id\n    setprojectid(projectid) {\n      this.setprojectId = projectid\n      this.qadata_projects.forEach((item) => {\n        if (projectid === item.projectId) {\n          this.setprojectname = item.projectName\n        }\n      })\n    },\n\n    //设置技术类型\n    settechtype(techtype) {\n      this.techtypeid = techtype\n      if(techtype === '所有技术类型'){\n        this.techtypeid = '0'\n      }\n    },\n\n    //获取业务线和项目\n    getproject() {\n      axios\n        .get('/project/query')\n        .then((response) => {\n          if (response.code === 200) {\n            this.qadatas = response.data\n\n            var qadata_groups = new Array()\n            var qadata_projects = new Array()\n\n            qadata_groups.push({ groupId: 0, groupName: '商业技术部' })\n\n            qadata_projects.push({ projectId: 0, projectName: '所有业务线' })\n            //获取所有业务线\n            response.data.forEach((groupitem) => {\n              qadata_groups.push({ groupId: groupitem.groupId, groupName: groupitem.groupName })\n\n              //获取所有项目\n              groupitem.projectList.forEach((projectitem) => {\n                qadata_projects.push({ projectId: projectitem.projectId, projectName: projectitem.projectName })\n              })\n            })\n            this.qadata_groups = qadata_groups\n            this.qadata_projects = qadata_projects\n            this.allproject = qadata_projects\n          }\n        })\n        .catch((error) => {\n          this.$message.error('内网数据获取失败')\n        })\n    },\n\n    getmemberdata() {\n      //表单提交请求\n      //\n      // let params = new FormData()\n      // params.append('Department', 'qa')\n      // axios\n      //   .post('/emplyoee/query', params, { headers: { 'Content-Type': 'multipart/form-data' } })\n      axios\n        .post('/emplyoee/query', {\n          groupId: this.setgroupId,\n          projectId: this.setprojectId,\n          tech_stack: this.techtypeid,\n        })\n        .then((response) => {\n          if (response.code === 200) {\n            // response.data.forEach((item) => {\n            //   if (item.userType === 1) {\n            //     item.userType = '是'\n            //   } else {\n            //     item.userType = '否'\n            //   }\n            // })\n            this.qadata = response.data\n          }\n        })\n        .catch((error) => {\n          this.$message.error('内网数据获取失败')\n        })\n    },\n\n    //模糊搜索人员\n    getmembersearch(name) {\n      axios\n        .post('emplyoee/search', { name: name })\n        .then((response) => {\n          if (response.code === 200) {\n            this.searchnamelist = response.data\n            console.log(this.setname)\n          }\n        })\n        .catch((error) => {\n          this.$message.error('内网数据获取失败')\n        })\n    },\n\n    //设置搜索人员名称\n    setsearchname(name) {\n      this.setname = name\n    },\n\n    //设置弹窗中的技术部列表和业务线列表\n    setmodellist() {\n      this.modelgrouplist = this.qadata_groups.slice(1)\n      this.modelprojectlist = this.qadata_projects.slice(1)\n      this.modeltechtype = this.techtypes.slice(1)\n    },\n\n    showModal(type, id, name, group, groupid, project, projectid, tech) {\n      //设置弹窗的技术部列表、业务线列表、技术类型列表\n      this.setmodellist()\n\n      //type=1 是添加弹窗\n      if (type === 1) {\n        this.cansetname = false\n        this.setname = ''\n        this.modelgroupname = ''\n        this.modelprojectname = ''\n        this.modeltechname = ''\n        this.modelnameid = id\n        this.modeltitle = '添加'\n        this.OperationType = 0\n      }\n      //type=2 是编辑弹窗\n      else if (type === 2) {\n        this.cansetname = true\n        this.setname = name\n        this.modelgroupname = group\n        this.modelprojectname = project\n        this.modeltechname = tech\n        this.modelnameid = id\n        this.modelgroupid = groupid\n        this.modelprojectid = projectid\n        this.modeltitle = '编辑'\n        this.OperationType = 1\n      }\n\n      document.documentElement.style = ''\n      this.visible = true\n    },\n    handleOk() {\n      axios\n        .post('/emplyoee/update', {\n          id: this.modelnameid,\n          operatorName: this.operatorName,\n          projectId: this.modelprojectid,\n          techStack: this.modeltechname,\n          OperationType: this.OperationType,\n        })\n        .then((response) => {\n          if (response.code === 200) {\n            this.$message.success('提交成功')\n            this.visible = false\n            this.init()\n          } else {\n            this.$message.error('提交失败')\n          }\n        })\n        .catch((error) => {\n          this.$message.error('内网数据获取失败')\n        })\n    },\n    onClose() {\n      document.documentElement.style.overflowY = 'overlay'\n    },\n\n    //设置弹窗技术部id\n    setmodelgroupid(id) {\n      this.modelgroupid = id\n      this.qadata_groups.forEach((item) => {\n        if (item.groupId === id) {\n          this.modelgroupname = item.groupName\n        }\n      })\n      this.qadatas.forEach((item) => {\n        if (item.groupId === id) {\n          this.modelprojectlist = item.projectList\n        }\n      })\n      //重置业务线名称和id\n      this.modelprojectname = this.modelprojectlist[0].projectName\n      this.modelprojectid = this.modelprojectlist[0].projectId\n    },\n\n    //设置弹窗业务线id\n    setmodelprojectid(id) {\n      this.modelprojectid = id\n      this.qadata_projects.forEach((item) => {\n        if (item.projectId === id) {\n          this.modelprojectname = item.projectName\n        }\n      })\n    },\n\n    //设置弹窗技术类型\n    setmodeltechtype(id) {\n      this.modeltechname = id\n    },\n\n    //设置是否隐藏\n    setshow(userid, showtype) {\n      //如果用户显示，改为隐藏\n\n      var userType = 0\n      if (showtype === 0) {\n        userType = 1\n      }\n      this.OperationType = 2\n\n      axios\n        .post('/emplyoee/update', {\n          id: userid,\n          userType: userType,\n          operatorName: this.operatorName,\n          OperationType: this.OperationType,\n        })\n        .then((response) => {\n          if (response.code === 200) {\n            this.getmemberdata()\n          }\n        })\n        .catch((error) => {\n          this.$message.error('内网数据获取失败')\n        })\n    },\n  },\n  computed: {},\n\n  created() {\n    this.init()\n\n  },\n}\n</script>\n<style scoped>\n.modeltext{\n  \n  width : 300px;\n \n}\n</style>\n"]}]}