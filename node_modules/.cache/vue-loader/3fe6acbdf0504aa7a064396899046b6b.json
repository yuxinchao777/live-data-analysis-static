{"remainingRequest":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/momo/code/vue/live-data-analysis-static/src/views/dashboard/QualityDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/momo/code/vue/live-data-analysis-static/src/views/dashboard/QualityDetail.vue","mtime":1626864386000},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/momo/code/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGF4aW9zIH0gZnJvbSAnQC91dGlscy9yZXF1ZXN0JwppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgcGFnaW5hdGlvbjogewogICAgICAgIGN1cnJlbnQ6IDEsCiAgICAgICAgdG90YWw6IDAsCiAgICAgIH0sCiAgICAgIHByb2plY3ROYW1lOiB0aGlzLiRyb3V0ZS5xdWVyeS5wcm9qZWN0TmFtZSwKICAgICAgcXVhbGl0eUNvbHVtbnM6IFsKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+W6j+WPtycsCiAgICAgICAgICBkYXRhSW5kZXg6ICdpbmRleCcsCiAgICAgICAgICBrZXk6ICdpbmRleCcsCiAgICAgICAgICB3aWR0aDogOTAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+mcgOaxguWQjeensCcsCiAgICAgICAgICBkYXRhSW5kZXg6ICdmdW5jdGlvbk5hbWUnLAogICAgICAgICAga2V5OiAnZnVuY3Rpb25OYW1lJywKICAgICAgICAgIHdpZHRoOiA0MDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+WGhee9kUJVR+aVsCcsCiAgICAgICAgICBkYXRhSW5kZXg6ICdidWdTdW0nLAogICAgICAgICAga2V5OiAnYnVnU3VtJywKICAgICAgICAgIGFsaWduOiAncmlnaHQnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfpgZfnlZlCVUfmlbAnLAogICAgICAgICAgZGF0YUluZGV4OiAnYnVnRGVmZXJyZWQnLAogICAgICAgICAga2V5OiAnYnVnRGVmZXJyZWQnLAogICAgICAgICAgYWxpZ246ICdyaWdodCcsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ0JVR+ino+WGs+eOhycsCiAgICAgICAgICBrZXk6ICdidWdSZXNvbHV0aW9uUmF0ZScsCiAgICAgICAgICBhbGlnbjogJ3JpZ2h0JywKICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ2J1Z1Jlc29sdXRpb25SYXRlJyB9LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmj5DmtYvotKjph48nLAogICAgICAgICAga2V5OiAncmRUZXN0UXVhbGl0eScsCiAgICAgICAgICBhbGlnbjogJ3JpZ2h0JywKICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ3JkVGVzdFF1YWxpdHknIH0sCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgbG9hZFF1YWxpdHlEYXRhOiBbXSwKICAgICAgZGF0YUNhY2hlOiB7fSwKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpIHsKICAgICAgdGhpcy5nZXREYXRhQnlQYWdlKCkKICAgIH0sCiAgICBnZXREYXRhQnlQYWdlKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoJy9CdXNpbmVzc0NvbnRyb2xsZXIvZ2V0RnVuY3Rpb25CeVByb2R1Y3RJZCcsIHsKICAgICAgICAgIHN0aW1lOiB0aGlzLiRyb3V0ZS5xdWVyeS5zdGltZSwKICAgICAgICAgIGV0aW1lOiB0aGlzLiRyb3V0ZS5xdWVyeS5ldGltZSwKICAgICAgICAgIHByb2plY3RJZDogdGhpcy4kcm91dGUucXVlcnkucHJvamVjdElkLAogICAgICAgICAgb2Zmc2V0OiAodGhpcy5wYWdpbmF0aW9uLmN1cnJlbnQgLSAxKSAqIDEwLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YS5saXN0CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZGF0YVtpXS5pbmRleCA9IGkgKyAxCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmxvYWRRdWFsaXR5RGF0YSA9IGRhdGEKICAgICAgICAgIHRoaXMuZGF0YUNhY2hlW3RoaXMucGFnaW5hdGlvbi5jdXJyZW50XSA9IGRhdGEKICAgICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb24uY3VycmVudCA9PSAxKSB7CiAgICAgICAgICAgIFZ1ZS5zZXQodGhpcy5wYWdpbmF0aW9uLCAndG90YWwnLCByZXMuZGF0YS50b3RhbCkKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgfSkKICAgIH0sCiAgICBvbkNoYW5nZShwYWdlLCBwYWdlU2l6ZSkgewogICAgICBjb25zb2xlLmxvZygncGFnZScsIHBhZ2UsICdwYWdlU2l6ZScsIHBhZ2VTaXplKQogICAgfSwKICAgIGhhbmRsZVRhYmxlQ2hhbmdlKHBhZ2luYXRpb24sIGZpbHRlcnMsIHNvcnRlcikgewogICAgICB0aGlzLnBhZ2luYXRpb24gPSBwYWdpbmF0aW9uCiAgICAgIGlmIChwYWdpbmF0aW9uLmN1cnJlbnQgaW4gdGhpcy5kYXRhQ2FjaGUpIHsKICAgICAgICB0aGlzLmxvYWRRdWFsaXR5RGF0YSA9IHRoaXMuZGF0YUNhY2hlW3BhZ2luYXRpb24uY3VycmVudF0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdldERhdGFCeVBhZ2UoKQogICAgICB9CiAgICB9LAogICAgZ2V0TnVtYmVyRnJvbVBlcmNlbnRTdHJpbmcoc3RyKSB7CiAgICAgIGxldCBudW1TdHIgPSBzdHIuc2xpY2UoMCwgLTEpCiAgICAgIHJldHVybiBOdW1iZXIobnVtU3RyKQogICAgfSwKICAgIGlzV2FybmluZ0NvbG9yKHJlY29yZCwgZmxvb3IsIGNlaWwpIHsKICAgICAgaWYgKHJlY29yZCA9PT0gJy0nKSB7CiAgICAgICAgcmV0dXJuICdub3JtYWxDb2x1bW4nCiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmluUmFuZ2UocmVjb3JkLCBmbG9vciwgY2VpbCkpIHsKICAgICAgICByZXR1cm4gJ3dhcm5pbmdDb2x1bW4nCiAgICAgIH0KICAgICAgcmV0dXJuICdub3JtYWxDb2x1bW4nCiAgICB9LAogICAgaW5SYW5nZShyZWNvcmQsIGZsb29yLCBjZWlsKSB7CiAgICAgIGlmIChyZWNvcmQgPT09ICctJykgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgbGV0IHN0YXQgPSB0aGlzLmdldE51bWJlckZyb21QZXJjZW50U3RyaW5nKHJlY29yZCkKICAgICAgcmV0dXJuIHN0YXQgPj0gZmxvb3IgJiYgc3RhdCA8PSBjZWlsCiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRpdGxlKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUubWV0YS50aXRsZQogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["QualityDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"QualityDetail.vue","sourceRoot":"src/views/dashboard","sourcesContent":["<template>\n  <div>\n    <div class=\"ant-title\">{{ projectName }}详细数据</div>\n    <a-table\n      :pagination=\"pagination\"\n      row-key=\"index\"\n      :columns=\"qualityColumns\"\n      :data-source=\"loadQualityData\"\n      @change=\"handleTableChange\"\n      :loading=\"loading\"\n    >\n      <template slot=\"bugResolutionRate\" slot-scope=\"record\">\n        <div v-if=\"record.bugSum>0&&!inRange(record.bugResolutionRate, 90, 100)\">\n          <a-tooltip placement=\"top\" title=\"BUG解决率合格线为90%\">\n            <span class=\"warningColumn\">\n              {{ record.bugResolutionRate }}\n            </span>\n          </a-tooltip>\n        </div>\n        <div v-else>\n          {{ record.bugResolutionRate }}\n        </div>\n      </template>\n      <template slot=\"rdTestQuality\" slot-scope=\"record\">\n        <div v-if=\"!inRange(record.rdTestQuality, 90, 100)\">\n          <a-tooltip placement=\"top\" title=\"开发提测质量合格线为90%\">\n            <span class=\"warningColumn\">\n              {{ record.rdTestQuality }}\n            </span>\n          </a-tooltip>\n        </div>\n        <div v-else>\n          {{ record.rdTestQuality }}\n        </div>\n      </template>\n    </a-table>\n  </div>\n</template>\n\n<script>\nimport { axios } from '@/utils/request'\nimport Vue from 'vue'\n\nexport default {\n  components: {},\n  data() {\n    return {\n      loading: true,\n      pagination: {\n        current: 1,\n        total: 0,\n      },\n      projectName: this.$route.query.projectName,\n      qualityColumns: [\n        {\n          title: '序号',\n          dataIndex: 'index',\n          key: 'index',\n          width: 90,\n        },\n        {\n          title: '需求名称',\n          dataIndex: 'functionName',\n          key: 'functionName',\n          width: 400,\n        },\n        {\n          title: '内网BUG数',\n          dataIndex: 'bugSum',\n          key: 'bugSum',\n          align: 'right',\n        },\n        {\n          title: '遗留BUG数',\n          dataIndex: 'bugDeferred',\n          key: 'bugDeferred',\n          align: 'right',\n        },\n        {\n          title: 'BUG解决率',\n          key: 'bugResolutionRate',\n          align: 'right',\n          scopedSlots: { customRender: 'bugResolutionRate' },\n        },\n        {\n          title: '提测质量',\n          key: 'rdTestQuality',\n          align: 'right',\n          scopedSlots: { customRender: 'rdTestQuality' },\n        },\n      ],\n      loadQualityData: [],\n      dataCache: {},\n    }\n  },\n  created() {\n    this.init()\n  },\n  methods: {\n    init() {\n      this.getDataByPage()\n    },\n    getDataByPage() {\n      this.loading = true\n      axios\n        .post('/BusinessController/getFunctionByProductId', {\n          stime: this.$route.query.stime,\n          etime: this.$route.query.etime,\n          projectId: this.$route.query.projectId,\n          offset: (this.pagination.current - 1) * 10,\n        })\n        .then((res) => {\n          let data = res.data.list\n          for (let i = 0; i < data.length; i++) {\n            data[i].index = i + 1\n          }\n          this.loadQualityData = data\n          this.dataCache[this.pagination.current] = data\n          if (this.pagination.current == 1) {\n            Vue.set(this.pagination, 'total', res.data.total)\n          }\n          this.loading = false\n        })\n        .catch(function (error) {\n          this.loading = false\n          console.log(error)\n        })\n    },\n    onChange(page, pageSize) {\n      console.log('page', page, 'pageSize', pageSize)\n    },\n    handleTableChange(pagination, filters, sorter) {\n      this.pagination = pagination\n      if (pagination.current in this.dataCache) {\n        this.loadQualityData = this.dataCache[pagination.current]\n      } else {\n        this.getDataByPage()\n      }\n    },\n    getNumberFromPercentString(str) {\n      let numStr = str.slice(0, -1)\n      return Number(numStr)\n    },\n    isWarningColor(record, floor, ceil) {\n      if (record === '-') {\n        return 'normalColumn'\n      }\n      if (!this.inRange(record, floor, ceil)) {\n        return 'warningColumn'\n      }\n      return 'normalColumn'\n    },\n    inRange(record, floor, ceil) {\n      if (record === '-') {\n        return true\n      }\n      let stat = this.getNumberFromPercentString(record)\n      return stat >= floor && stat <= ceil\n    },\n  },\n  computed: {\n    title() {\n      return this.$route.meta.title\n    },\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.warningColumn {\n  color: #ef3c59;\n  font-weight: bold;\n  padding: 5px;\n}\n.extra-wrapper {\n  line-height: 55px;\n  padding-right: 24px;\n\n  .extra-item {\n    display: inline-block;\n    margin-right: 24px;\n\n    a {\n      margin-left: 24px;\n    }\n  }\n}\n\n.antd-pro-pages-dashboard-analysis-twoColLayout {\n  position: relative;\n  display: flex;\n  display: block;\n  flex-flow: row wrap;\n}\n\n.antd-pro-pages-dashboard-analysis-salesCard {\n  width: 100%;\n  height: calc(100% - 24px);\n  /* /deep/ .ant-card-head {\n    position: relative;\n  } */\n}\n\n.ant-col-3 {\n  width: 33%;\n}\n\n.ant-font-2 {\n  font-size: 13px;\n}\n.dashboard-analysis-iconGroup {\n  i {\n    margin-left: 16px;\n    color: rgba(0, 0, 0, 0.45);\n    cursor: pointer;\n    transition: color 0.32s;\n    color: black;\n  }\n}\n.analysis-salesTypeRadio {\n  position: absolute;\n  right: 54px;\n  bottom: 12px;\n}\n\n.timeRadioGroup {\n  margin-left: 54px;\n}\n\n.timeRadioButtons.ant-radio-button-wrapper::before {\n  display: none;\n  visibility: hidden;\n}\n.timeRadioButtons {\n  border: none;\n}\n.timeRadioGroup {\n  margin-left: 54px;\n  border: none;\n}\n.ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled) {\n  z-index: 1;\n  color: #1890ff;\n  background: #fff;\n  border-color: #ffffff;\n  -webkit-box-shadow: -1px 0 0 0 #ffffff;\n  box-shadow: -1px 0 0 0 #ffffff;\n}\n.ant-title {\n  color: #1890ff;\n  font-size: 16px;\n  margin-bottom: 24px;\n  font-weight: 500;\n}\n</style>\n"]}]}