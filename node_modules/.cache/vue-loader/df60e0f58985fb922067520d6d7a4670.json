{"remainingRequest":"/Users/momo/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/momo/vue/live-data-analysis-static/src/views/qadata/qadate.vue?vue&type=style&index=0&id=0b09d289&scoped=true&lang=css&","dependencies":[{"path":"/Users/momo/vue/live-data-analysis-static/src/views/qadata/qadate.vue","mtime":1629456826347},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/css-loader/dist/cjs.js","mtime":1626939589967},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1626939590555},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/postcss-loader/src/index.js","mtime":1626939590514},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/cache-loader/dist/cjs.js","mtime":1626939577620},{"path":"/Users/momo/vue/live-data-analysis-static/node_modules/vue-loader/lib/index.js","mtime":1626939590555}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmEtcmFuZ2UtcGlja2VyewogIG1hcmdpbi1sZWZ0OiAyMHB4OwogIG1hcmdpbi1yaWdodDogMjBweDsKfQoKCg=="},{"version":3,"sources":["qadate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA;AACA;AACA;AACA","file":"qadate.vue","sourceRoot":"src/views/qadata","sourcesContent":["<template>\n  <div>\n    <div>\n      <!--部门下拉框-->\n      部门<a-select default-value=\"全部\" style=\"width: 100px;margin-left: 5px\">\n      <a-select-option v-for='apartment in qadatas.data.apartments' :key='apartment.id' :value=\"apartment.name\" @click='setapartmentid(apartment.id)' >\n        {{apartment.name}}\n      </a-select-option>\n    </a-select>\n      <!--时间选择框-->\n      <a-range-picker class='a-range-picker' style='width:400px' show-time v-model:value = \"dateRange\">\n        <template slot='renderExtraFooter' >\n          日期选择\n        </template>\n      </a-range-picker>\n      <a-button type='primary' icon='search' @click='getneedtimelist(dateRange)'>\n        Search\n      </a-button>\n    </div>\n    <a-table :columns='columns' :data-source='qadata' style='margin-top: 20px' :loading='isLoading'>\n      <a slot='action' slot-scope='text,record'>\n        <!--        {{record.details}}-->\n        <a-dropdown>\n          <a class='ant-dropdown-link'>\n            查看详情\n            <a-icon type='down' />\n          </a>\n          <a-menu slot='overlay' v-if='record.taskDetail && record.taskDetail.length'\n                  style='overflow: scroll;width:auto;height: 150px'>\n            <a-menu-item v-for='(detail,index) in record.taskDetail' :key='index'\n                         @click='jumpto(detail && detail.taskUrl)'>\n              <h4 style='size: A4; color: #096dd9'> {{ detail.taskName }}</h4>\n            </a-menu-item>\n          </a-menu>\n          <a-menu slot=\"overlay\" v-else>\n            <a-menu-item>\n              <h4 style='size: A4;'>无</h4>\n            </a-menu-item>\n\n          </a-menu>\n        </a-dropdown>\n      </a>\n    </a-table>\n  </div>\n</template>\n\n<script>\nimport { axios } from '@/utils/request'\n\nconst columns = [\n  { title: '姓名', width: 50, dataIndex: 'name', key: 'name'},\n  { title: '工时（H）', width: 50, dataIndex: 'jobHours', key: 'use_time'},\n  { title: 'case数', dataIndex: 'caseNum', key: 'caseNum', width: 50 },\n  { title: 'bug数', dataIndex: 'bugNum', key: 'bugNum', width: 50 },\n  {\n    title: '详情',\n    key: 'taskDetail',\n    width: 100,\n    scopedSlots: { customRender: 'action' }\n  }\n]\n\n\nconst qadatas = {\n  statuscode : 200,\n  data : {\n    apartments :[\n      {id:1,name:\"部门1\"},\n      {id:2,name:\"部门2\"},\n      {id:3,name:\"部门3\"}\n    ],\n  }\n}\n\nexport default {\n  data() {\n    return {\n      columns,\n      qadatas,\n      qadata:[],\n      dateRange: [],\n      visible: false,\n      apartmentid:0,\n      isLoading: false\n    }\n  },\n\n  methods:{\n    init(){\n      this.dateRange =[this.dayjs().startOf('week').add(1,\"day\").format('dddd MMM DD YYYY HH:mm:ss ZZ'),\n        this.dayjs().endOf('week').add(1,\"day\").format('dddd MMM DD YYYY HH:mm:ss ZZ')]\n      let temptime = [this.dayjs().startOf('week').add(1,\"day\").format('YYYY-MM-DD HH:mm:ss'),\n        this.dayjs().endOf('week').add(1,\"day\").format('YYYY-MM-DD HH:mm:ss')]\n      this.getqadate(temptime[0],temptime[1])\n    },\n    getqadate(starttime,endtime){\n      this.isLoading = true\n      axios\n        .post('/qaStatistics', {\n          startTime: starttime,\n          endTime: endtime,\n          apartmentid: this.apartmentid\n        })\n        .then((response) => {\n          if (response.code === 200) {\n            this.isLoading = false\n            this.qadata = response.data\n          }\n        }\n      ).catch((error) => {\n          this.$message.error('内网数据获取失败')\n        }\n      )\n    },\n    setapartmentid(apartmentid){\n      this.apartmentid=apartmentid\n    },\n    getneedtimelist(dateRange){\n      let currentStartTime = this.dayjs(dateRange[0].valueOf()).format('YYYY-MM-DD HH:mm:ss')\n      let currentEndTime = this.dayjs(dateRange[1].valueOf()).format('YYYY-MM-DD HH:mm:ss')\n      this.getqadate(currentStartTime,currentEndTime)\n    },\n    jumpto(hrefhost){\n      window.open(hrefhost)\n    },\n    getcurrenttime(rangetime){\n      const starttime = this.dayjs(rangetime[0]).format('YYYY-MM-DD HH:mm:ss')\n      const endtime = this.dayjs(rangetime[1]).format('YYYY-MM-DD HH:mm:ss')\n      return [starttime,endtime]\n    }\n  },\n  computed:{\n  },\n  created() {\n    this.init()\n  }\n}\n\n</script>\n\n<style scoped>\n.a-range-picker{\n  margin-left: 20px;\n  margin-right: 20px;\n}\n\n\n</style>"]}]}